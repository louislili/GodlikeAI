{
  "nodes": [
    {
      "nodeId": "userGuide",
      "name": "系统配置",
      "intro": "可以配置应用的系统参数",
      "avatar": "core/workflow/template/systemConfig",
      "flowNodeType": "userGuide",
      "position": {
        "x": -1440.3270272691714,
        "y": -550.087526909934
      },
      "version": "481",
      "inputs": [],
      "outputs": []
    },
    {
      "nodeId": "workflowStartNodeId",
      "name": "流程开始",
      "intro": "",
      "avatar": "core/workflow/template/workflowStart",
      "flowNodeType": "workflowStart",
      "position": {
        "x": -970.2298662979223,
        "y": -429.09791589741553
      },
      "version": "481",
      "inputs": [
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "required": true,
          "toolDescription": "用户问题",
          "debugLabel": ""
        }
      ],
      "outputs": [
        {
          "id": "userChatInput",
          "key": "userChatInput",
          "label": "common:core.module.input.label.user question",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "7BdojPlukIQw",
      "name": "SQL生成",
      "intro": "workflow:template.ai_chat_intro",
      "avatar": "core/workflow/template/aiChat",
      "flowNodeType": "chatNode",
      "showStatus": true,
      "position": {
        "x": 4612.551253914525,
        "y": -1976.9280254932262
      },
      "version": "4813",
      "inputs": [
        {
          "key": "model",
          "renderTypeList": [
            "settingLLMModel",
            "reference"
          ],
          "label": "common:core.module.input.label.aiModel",
          "valueType": "string",
          "value": "ep-20250726104520-85xss",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "temperature",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 2,
          "valueType": "number",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "maxToken",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 1950,
          "valueType": "number",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "isResponseAnswerText",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": false,
          "valueType": "boolean",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatQuoteRole",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "system",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteTemplate",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "\n{{q}}\n\n注意：减少BETWEEN AND语法的使用，建议使用大于小于等",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quotePrompt",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "{{quote}}\n",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatVision",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": true,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatReasoning",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": true,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "systemPrompt",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "max": 3000,
          "valueType": "string",
          "label": "common:core.ai.Prompt",
          "description": "core.app.tip.systemPromptTip",
          "placeholder": "core.app.tip.chatNodeSystemPromptTip",
          "value": "请根据用户选择的数据库和该库的部分可用表结构定义来回答用户问题.\n数据库名:\n    car\n表结构定义:\n    {{$aWE2FuOjdzNU.system_text$}}\n\n当前时间：{{$nHq58FIzY37m.time$}}\n\n约束:\n    1. 请根据用户问题理解用户意图，使用给出表结构定义创建一个语法正确的 mysql sql。\n    2. 除非用户在问题中指定了他希望获得的具体数据行数，否则始终将查询限制为最多 30 个结果。\n    3. 只能使用表结构信息中提供的表来生成 sql，如果无法根据提供的表结构中生成 sql ，请说：“很抱歉，当前无法为您查询该问题，小智会努力学习哒” 禁止随意捏造信息。\n    4. 请注意生成SQL时不要弄错表和列的关系\n    5. 请检查SQL的正确性，并保证正确的情况下优化查询性能\n    6. 涉及到排名或占比等，若无特别要求，默认降序排列\n    7. 查询数据时，请使用中文别名，涉及到groupby时，使用别名\n    8. 请直接输出一个ClickHouse SQL的查询语句，不要有其它解释\n重点：根据用户的语境输出合理的结果和限制，比如，出现统计类的，除非用户有需求，否则默认Limit 30 等等\n输出格式示例：```sql\nSELECT \n    ​a \nFROM t_b\nWHERE c = 1\nLIMIT 30;\n```\n特别注意事项：只能对表进行查询，禁止增加、修改、删除任何数据！！！",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "history",
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "valueType": "chatHistory",
          "label": "common:core.module.input.label.chat history",
          "description": "workflow:max_dialog_rounds",
          "required": true,
          "min": 0,
          "max": 50,
          "value": 6,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteQA",
          "renderTypeList": [
            "settingDatasetQuotePrompt"
          ],
          "label": "",
          "debugLabel": "知识库引用",
          "description": "",
          "valueType": "datasetQuote",
          "value": [
            "MNMMMIjjWyMU",
            "quoteQA"
          ],
          "toolDescription": ""
        },
        {
          "key": "fileUrlList",
          "renderTypeList": [
            "reference",
            "input"
          ],
          "label": "app:file_quote_link",
          "debugLabel": "文件链接",
          "valueType": "arrayString",
          "toolDescription": "",
          "value": [
            [
              "workflowStartNodeId",
              "userFiles"
            ]
          ]
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "workflow:user_question",
          "toolDescription": "用户问题",
          "required": true,
          "value": "{{$workflowStartNodeId.userChatInput$}}\n上下文综合意图：{{$zn5Hgml4jILG.answerText$}}",
          "debugLabel": "",
          "selectedTypeIndex": 1
        }
      ],
      "outputs": [
        {
          "id": "history",
          "key": "history",
          "required": true,
          "label": "common:core.module.output.label.New context",
          "description": "将本次回复内容拼接上历史记录，作为新的上下文返回",
          "valueType": "chatHistory",
          "valueDesc": "{\n  obj: System | Human | AI;\n  value: string;\n}[]",
          "type": "static"
        },
        {
          "id": "answerText",
          "key": "answerText",
          "required": true,
          "label": "common:core.module.output.label.Ai response content",
          "description": "将在 stream 回复完毕后触发",
          "valueType": "string",
          "type": "static"
        }
      ]
    },
    {
      "nodeId": "rvbo634w3AYj",
      "name": "用户意图识别",
      "intro": "根据用户的历史记录和当前问题判断该次提问的类型。可以添加多组问题类型，下面是一个模板例子：\n类型1: 打招呼\n类型2: 关于商品\"使用\"问题\n类型3: 关于商品\"购买\"问题\n类型4: 其他问题",
      "avatar": "core/workflow/template/questionClassify",
      "flowNodeType": "classifyQuestion",
      "showStatus": true,
      "position": {
        "x": 1137.3892906646747,
        "y": -593.1671312910327
      },
      "version": "481",
      "inputs": [
        {
          "key": "model",
          "renderTypeList": [
            "selectLLMModel",
            "reference"
          ],
          "label": "core.module.input.label.aiModel",
          "required": true,
          "valueType": "string",
          "llmModelType": "classify",
          "value": "ep-20250726104520-85xss",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "systemPrompt",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "max": 3000,
          "valueType": "string",
          "label": "core.module.input.label.Background",
          "description": "core.module.input.description.Background",
          "placeholder": "core.module.input.placeholder.Classify background",
          "value": "请你根据要求，将用户的提问精准分类，过滤口碑相关和非口碑相关的意图。\n联网问答：询问城市天气需要网络的情况\n打招呼：例如：你好\n数据查询统计分析：关于汽车语音、车辆维度、数字钥匙的使用、工单数据、用户行程信息、充电信息等的问题；\n表信息询问：询问有哪些表、表结构、推荐一些有意义的数据问题等\n联网资讯：一些需要联网查询的资讯问题等\n【重点】和口碑相关的意图：用户意图中涉及到口碑分析、情感分析、某个车的口碑、某些车的口碑分析的情况",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "history",
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "valueType": "chatHistory",
          "label": "core.module.input.label.chat history",
          "required": true,
          "min": 0,
          "max": 50,
          "value": 2,
          "description": "workflow:max_dialog_rounds",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "required": true,
          "value": "用户当前提问：{{$workflowStartNodeId.userChatInput$}}\n上下文综合意图：{{$zn5Hgml4jILG.answerText$}}",
          "toolDescription": "用户输入的问题（问题需要完善）",
          "debugLabel": "",
          "selectedTypeIndex": 1
        },
        {
          "renderTypeList": [
            "custom"
          ],
          "valueType": "any",
          "label": "",
          "debugLabel": "",
          "toolDescription": "",
          "key": "agents",
          "value": [
            {
              "value": "数据统计分析",
              "key": "wqre"
            },
            {
              "value": "打招呼",
              "key": "sdfa"
            },
            {
              "value": "联网资讯",
              "key": "qiicIbEePegH"
            },
            {
              "value": "其它问题",
              "key": "cr8fsOMlD9Lo"
            },
            {
              "value": "车型购买推荐",
              "key": "lieUUnJgtPaS"
            },
            {
              "value": "和口碑相关的意图",
              "key": "zI9wAWUpo5lf"
            }
          ]
        }
      ],
      "outputs": [
        {
          "id": "cqResult",
          "key": "cqResult",
          "required": true,
          "label": "workflow:classification_result",
          "valueType": "string",
          "type": "static",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "MNMMMIjjWyMU",
      "name": "业务知识理解",
      "intro": "调用\"语义检索\"和\"全文检索\"能力，从\"知识库\"中查找可能与问题相关的参考内容",
      "avatar": "core/workflow/template/datasetSearch",
      "flowNodeType": "datasetSearchNode",
      "showStatus": true,
      "position": {
        "x": 2059.896586918982,
        "y": -1136.8349576623732
      },
      "version": "481",
      "inputs": [
        {
          "key": "datasets",
          "renderTypeList": [
            "selectDataset",
            "reference"
          ],
          "label": "core.module.input.label.Select dataset",
          "value": [],
          "valueType": "selectDataset",
          "list": [],
          "required": true,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "similarity",
          "renderTypeList": [
            "selectDatasetParamsModal"
          ],
          "label": "",
          "value": 0.5,
          "valueType": "number",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "limit",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 1000,
          "valueType": "number",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "searchMode",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "embedding",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "usingReRank",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchUsingExtensionQuery",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchExtensionModel",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "debugLabel": "",
          "toolDescription": "",
          "value": ""
        },
        {
          "key": "datasetSearchExtensionBg",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "authTmbId",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "required": true,
          "toolDescription": "需要检索的内容",
          "value": [
            "workflowStartNodeId",
            "userChatInput"
          ],
          "debugLabel": ""
        },
        {
          "key": "collectionFilterMatch",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "label": "workflow:collection_metadata_filter",
          "valueType": "string",
          "isPro": true,
          "description": "workflow:filter_description",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "quoteQA",
          "key": "quoteQA",
          "label": "common:core.module.Dataset quote.label",
          "description": "特殊数组格式，搜索结果为空时，返回空数组。",
          "type": "static",
          "valueType": "datasetQuote",
          "valueDesc": "{\n  id: string;\n  datasetId: string;\n  collectionId: string;\n  sourceName: string;\n  sourceId?: string;\n  q: string;\n  a: string\n}[]"
        }
      ]
    },
    {
      "nodeId": "fnWxThTvDg5C",
      "name": "AI对话",
      "intro": "workflow:template.ai_chat_intro",
      "avatar": "core/workflow/template/aiChat",
      "flowNodeType": "chatNode",
      "showStatus": true,
      "position": {
        "x": 2046.7650207866236,
        "y": -433.5546336630035
      },
      "version": "4813",
      "inputs": [
        {
          "key": "model",
          "renderTypeList": [
            "settingLLMModel",
            "reference"
          ],
          "label": "common:core.module.input.label.aiModel",
          "valueType": "string",
          "value": "ep-20240923183310-nkvxk",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "temperature",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 3,
          "valueType": "number",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "maxToken",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 1950,
          "valueType": "number",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "isResponseAnswerText",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": true,
          "valueType": "boolean",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatQuoteRole",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "system",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteTemplate",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quotePrompt",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatVision",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": true,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatReasoning",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": true,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "systemPrompt",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "max": 3000,
          "valueType": "string",
          "label": "common:core.ai.Prompt",
          "description": "core.app.tip.systemPromptTip",
          "placeholder": "core.app.tip.chatNodeSystemPromptTip",
          "value": "你是一个SDS数据分析助手，可以协助用户完成指定任务的分析。\n当前时间：{{$nHq58FIzY37m.time$}}",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "history",
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "valueType": "chatHistory",
          "label": "common:core.module.input.label.chat history",
          "description": "workflow:max_dialog_rounds",
          "required": true,
          "min": 0,
          "max": 50,
          "value": 0,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteQA",
          "renderTypeList": [
            "settingDatasetQuotePrompt"
          ],
          "label": "",
          "debugLabel": "知识库引用",
          "description": "",
          "valueType": "datasetQuote",
          "value": [
            "MNMMMIjjWyMU",
            "quoteQA"
          ],
          "toolDescription": ""
        },
        {
          "key": "fileUrlList",
          "renderTypeList": [
            "reference",
            "input"
          ],
          "label": "app:file_quote_link",
          "debugLabel": "文件链接",
          "valueType": "arrayString",
          "toolDescription": "",
          "value": [
            [
              "workflowStartNodeId",
              "userFiles"
            ]
          ]
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "workflow:user_question",
          "toolDescription": "用户问题",
          "required": true,
          "value": [
            "workflowStartNodeId",
            "userChatInput"
          ],
          "debugLabel": ""
        }
      ],
      "outputs": [
        {
          "id": "history",
          "key": "history",
          "required": true,
          "label": "common:core.module.output.label.New context",
          "description": "将本次回复内容拼接上历史记录，作为新的上下文返回",
          "valueType": "chatHistory",
          "valueDesc": "{\n  obj: System | Human | AI;\n  value: string;\n}[]",
          "type": "static"
        },
        {
          "id": "answerText",
          "key": "answerText",
          "required": true,
          "label": "common:core.module.output.label.Ai response content",
          "description": "将在 stream 回复完毕后触发",
          "valueType": "string",
          "type": "static"
        }
      ]
    },
    {
      "nodeId": "pc6dd4t83jP5",
      "name": "AI 对话",
      "intro": "AI 大模型对话",
      "avatar": "core/workflow/template/aiChat",
      "flowNodeType": "chatNode",
      "showStatus": true,
      "position": {
        "x": 3052.4729781061787,
        "y": 2660.2858457101465
      },
      "version": "4813",
      "inputs": [
        {
          "key": "model",
          "renderTypeList": [
            "settingLLMModel",
            "reference"
          ],
          "label": "AI 模型",
          "valueType": "string",
          "value": "ep-20250213170355-2b4rw",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "temperature",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "maxToken",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "isResponseAnswerText",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": true,
          "valueType": "boolean",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatQuoteRole",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "system",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteTemplate",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quotePrompt",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatVision",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatReasoning",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "systemPrompt",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "max": 3000,
          "valueType": "string",
          "label": "提示词",
          "description": "core.app.tip.systemPromptTip",
          "placeholder": "core.app.tip.chatNodeSystemPromptTip",
          "value": "你是一个SDS数据分析助手，可以协助用户完成指定任务的分析。\n以下是联网资料：\n{{$y26spo3xJPRj.resp_zhipu$}}\n当前时间：{{$nHq58FIzY37m.time$}}",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "history",
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "valueType": "chatHistory",
          "label": "聊天记录",
          "description": "workflow:max_dialog_rounds",
          "required": true,
          "min": 0,
          "max": 50,
          "value": 6,
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteQA",
          "renderTypeList": [
            "settingDatasetQuotePrompt"
          ],
          "label": "",
          "debugLabel": "知识库引用",
          "description": "",
          "valueType": "datasetQuote",
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "fileUrlList",
          "renderTypeList": [
            "reference",
            "input"
          ],
          "label": "文件链接",
          "debugLabel": "文件链接",
          "valueType": "arrayString",
          "value": [
            [
              "workflowStartNodeId",
              "userFiles"
            ]
          ],
          "valueDesc": "",
          "description": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "用户问题",
          "required": true,
          "value": [
            "workflowStartNodeId",
            "userChatInput"
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": ""
        }
      ],
      "outputs": [
        {
          "id": "history",
          "key": "history",
          "required": true,
          "label": "common:core.module.output.label.New context",
          "description": "将本次回复内容拼接上历史记录，作为新的上下文返回",
          "valueType": "chatHistory",
          "valueDesc": "{\n  obj: System | Human | AI;\n  value: string;\n}[]",
          "type": "static"
        },
        {
          "id": "answerText",
          "key": "answerText",
          "required": true,
          "label": "common:core.module.output.label.Ai response content",
          "description": "将在 stream 回复完毕后触发",
          "valueType": "string",
          "type": "static"
        }
      ]
    },
    {
      "nodeId": "qW4AhitU7X35",
      "name": "指定回复",
      "intro": "该模块可以直接回复一段指定的内容。常用于引导、提示。非字符串内容传入时，会转成字符串进行输出。",
      "avatar": "core/workflow/template/reply",
      "flowNodeType": "answerNode",
      "position": {
        "x": 3400.6362018859013,
        "y": -2156.1465559205335
      },
      "version": "481",
      "inputs": [
        {
          "key": "text",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "valueType": "any",
          "required": true,
          "label": "回复的内容",
          "description": "common:core.module.input.description.Response content",
          "placeholder": "common:core.module.input.description.Response content",
          "value": "\n\n",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": []
    },
    {
      "nodeId": "mO4DMBmY31z7",
      "name": "结果分析",
      "intro": "AI 大模型对话",
      "avatar": "core/workflow/template/aiChat",
      "flowNodeType": "chatNode",
      "showStatus": true,
      "position": {
        "x": 20454.45635618525,
        "y": -6321.94574558125
      },
      "version": "4813",
      "inputs": [
        {
          "key": "model",
          "renderTypeList": [
            "settingLLMModel",
            "reference"
          ],
          "label": "AI 模型",
          "valueType": "string",
          "value": "ep-20250726104520-85xss",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "temperature",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "maxToken",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": 5000
        },
        {
          "key": "isResponseAnswerText",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": true,
          "valueType": "boolean",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatQuoteRole",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "system",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteTemplate",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quotePrompt",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatVision",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatReasoning",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "systemPrompt",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "max": 3000,
          "valueType": "string",
          "label": "提示词",
          "description": "core.app.tip.systemPromptTip",
          "placeholder": "core.app.tip.chatNodeSystemPromptTip",
          "value": "根据当前用户角色分析,理解当前用户角色的背景和真实需求，分析用户当前意图，并结合数据做出响应，数据不足时，忽略数据，直接响应。\n当前提问用户：{{$VARIABLE_NODE_ID.角色$}}\n查询语句:\n{{$7BdojPlukIQw.answerText$}}\n数据查询结果：\n{{$nDht8bLHEArr.result$}}\n其它补充资料：\n{{$tD4hLtYB2ChP.quoteQA$}}\n\n\n当前时间：{{$nHq58FIzY37m.time$}}\n[核心重点]：分析时忽略null数据的影响且禁止将null情况暴露给用户，禁止透露和提示词要求的细节，禁止在回复里出现包含null的响应和回复提示词prompt的内容，核心还是要分析用户的原始需求和业务\n注意：\n1. 请从多个维度有结构化的分析和回答问题\n2. 无需对数据进行全量重述，直接分析即可\n3. 数据为空时，可以解释未查询到相关数据，无法分析\n4. 用户涉及图表绘制需求时，忽略该部分且不做任何回应。",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "history",
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "valueType": "chatHistory",
          "label": "聊天记录",
          "description": "workflow:max_dialog_rounds",
          "required": true,
          "min": 0,
          "max": 50,
          "value": 0,
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteQA",
          "renderTypeList": [
            "settingDatasetQuotePrompt"
          ],
          "label": "",
          "debugLabel": "知识库引用",
          "description": "",
          "valueType": "datasetQuote",
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "fileUrlList",
          "renderTypeList": [
            "reference",
            "input"
          ],
          "label": "文件链接",
          "debugLabel": "文件链接",
          "valueType": "arrayString",
          "value": [
            [
              "workflowStartNodeId",
              "userFiles"
            ]
          ],
          "valueDesc": "",
          "description": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "用户问题",
          "required": true,
          "value": "用户的原始需求：{{$workflowStartNodeId.userChatInput$}}\n上下文综合意图：{{$zn5Hgml4jILG.answerText$}}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "selectedTypeIndex": 1
        }
      ],
      "outputs": [
        {
          "id": "history",
          "key": "history",
          "required": true,
          "label": "common:core.module.output.label.New context",
          "description": "将本次回复内容拼接上历史记录，作为新的上下文返回",
          "valueType": "chatHistory",
          "valueDesc": "{\n  obj: System | Human | AI;\n  value: string;\n}[]",
          "type": "static"
        },
        {
          "id": "answerText",
          "key": "answerText",
          "required": true,
          "label": "common:core.module.output.label.Ai response content",
          "description": "将在 stream 回复完毕后触发",
          "valueType": "string",
          "type": "static"
        }
      ]
    },
    {
      "nodeId": "jB7G9WiseTUd",
      "name": "代码运行",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": 6587.090452900172,
        "y": -1919.5163293484534
      },
      "version": "482",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:these_variables_will_be_input_parameters_for_code_execution",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "value": "function main({ data }) {\n    // 提取被代码块包裹的 SQL 内容\n    const codeBlockMatch = data.match(/```sql\\n([\\s\\S]*?)\\n```/);\n    if (codeBlockMatch) {\n        return { result: codeBlockMatch[1].trim() };\n    }\n\n    // 处理直接以\"sql\"开头的情况\n    if (data.startsWith(\"sql\")) {\n        return { result: data.slice(3).trim() };\n    }\n\n    // 返回原始内容（如果既无代码块也无 sql 前缀）\n    return { result: data.trim() };\n}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "data",
          "label": "data",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "value": [
            "7BdojPlukIQw",
            "answerText"
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "workflow:full_response_data",
          "valueType": "object",
          "type": "static",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "workflow:execution_error",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "result",
          "valueType": "string",
          "label": "result",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "nHq58FIzY37m",
      "name": "获取当前时间",
      "intro": "获取用户当前时区的时间。",
      "avatar": "core/workflow/template/getTime",
      "flowNodeType": "pluginModule",
      "showStatus": false,
      "position": {
        "x": -368.3119946317305,
        "y": -404.6800509853131
      },
      "version": "481",
      "inputs": [
        {
          "key": "system_forbid_stream",
          "renderTypeList": [
            "switch"
          ],
          "valueType": "boolean",
          "label": "禁用流输出",
          "description": "强制设置嵌套运行的应用，均以非流模式运行",
          "value": false,
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "time",
          "type": "static",
          "key": "time",
          "valueType": "string",
          "label": "time",
          "description": "",
          "valueDesc": ""
        }
      ],
      "pluginId": "community-getTime"
    },
    {
      "nodeId": "hq35aydKkx8N",
      "name": "用于隔离SQL内容和表格",
      "intro": "该模块可以直接回复一段指定的内容。常用于引导、提示。非字符串内容传入时，会转成字符串进行输出。",
      "avatar": "core/workflow/template/reply",
      "flowNodeType": "answerNode",
      "position": {
        "x": 5631.531687695896,
        "y": -1739.4288877344113
      },
      "version": "481",
      "inputs": [
        {
          "key": "text",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "valueType": "any",
          "required": true,
          "label": "回复的内容",
          "description": "common:core.module.input.description.Response content",
          "placeholder": "common:core.module.input.description.Response content",
          "value": "\n",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": []
    },
    {
      "nodeId": "y26spo3xJPRj",
      "name": "智能联网",
      "intro": "",
      "avatar": "core/app/type/pluginFill",
      "flowNodeType": "pluginModule",
      "showStatus": true,
      "position": {
        "x": 1879.6964182500933,
        "y": 2802.3613813281086
      },
      "version": "6809ddc59c494e979caa7e25",
      "inputs": [
        {
          "key": "system_forbid_stream",
          "renderTypeList": [
            "switch"
          ],
          "valueType": "boolean",
          "label": "workflow:template.forbid_stream",
          "description": "workflow:template.forbid_stream_desc",
          "value": false
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "selectedTypeIndex": 0,
          "valueType": "string",
          "canEdit": false,
          "key": "question",
          "label": "question",
          "description": "问题",
          "defaultValue": "",
          "list": [
            {
              "label": "",
              "value": ""
            }
          ],
          "required": true,
          "toolDescription": "问题",
          "value": [
            "workflowStartNodeId",
            "userChatInput"
          ]
        }
      ],
      "outputs": [
        {
          "id": "resp_zhipu",
          "type": "static",
          "key": "resp_zhipu",
          "valueType": "string",
          "label": "resp_zhipu",
          "description": ""
        }
      ],
      "pluginId": "6790bde8008b4cc325173805"
    },
    {
      "nodeId": "nAlFgbaJtEY8",
      "name": "AI 对话",
      "intro": "AI 大模型对话",
      "avatar": "core/workflow/template/aiChat",
      "flowNodeType": "chatNode",
      "showStatus": true,
      "position": {
        "x": 2126.89154430855,
        "y": 1570.3406510465866
      },
      "version": "4813",
      "inputs": [
        {
          "key": "model",
          "renderTypeList": [
            "settingLLMModel",
            "reference"
          ],
          "label": "AI 模型",
          "valueType": "string",
          "value": "ep-20240923183310-nkvxk",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "temperature",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "maxToken",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "isResponseAnswerText",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": true,
          "valueType": "boolean",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatQuoteRole",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "system",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteTemplate",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quotePrompt",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatVision",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatReasoning",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "systemPrompt",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "max": 3000,
          "valueType": "string",
          "label": "提示词",
          "description": "core.app.tip.systemPromptTip",
          "placeholder": "core.app.tip.chatNodeSystemPromptTip",
          "value": "你是一个SDS数据分析助手，擅长协助用户完成指定任务的分析，也可以回答一些其他开放性问题。\n已知当前时间：{{$nHq58FIzY37m.time$}}\n注意：用户用中文提问时，回答也要使用中文；",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "history",
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "valueType": "chatHistory",
          "label": "聊天记录",
          "description": "workflow:max_dialog_rounds",
          "required": true,
          "min": 0,
          "max": 50,
          "value": 6,
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteQA",
          "renderTypeList": [
            "settingDatasetQuotePrompt"
          ],
          "label": "",
          "debugLabel": "知识库引用",
          "description": "",
          "valueType": "datasetQuote",
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "fileUrlList",
          "renderTypeList": [
            "reference",
            "input"
          ],
          "label": "文件链接",
          "debugLabel": "文件链接",
          "valueType": "arrayString",
          "value": [
            [
              "workflowStartNodeId",
              "userFiles"
            ]
          ],
          "valueDesc": "",
          "description": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "用户问题",
          "required": true,
          "value": [
            "workflowStartNodeId",
            "userChatInput"
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": ""
        }
      ],
      "outputs": [
        {
          "id": "history",
          "key": "history",
          "required": true,
          "label": "common:core.module.output.label.New context",
          "description": "将本次回复内容拼接上历史记录，作为新的上下文返回",
          "valueType": "chatHistory",
          "valueDesc": "{\n  obj: System | Human | AI;\n  value: string;\n}[]",
          "type": "static"
        },
        {
          "id": "answerText",
          "key": "answerText",
          "required": true,
          "label": "common:core.module.output.label.Ai response content",
          "description": "将在 stream 回复完毕后触发",
          "valueType": "string",
          "type": "static"
        }
      ]
    },
    {
      "nodeId": "ef52KtwkRPIb",
      "name": "查询结果输出",
      "intro": "AI 大模型对话",
      "avatar": "core/workflow/template/aiChat",
      "flowNodeType": "chatNode",
      "showStatus": true,
      "position": {
        "x": 8831.71482698771,
        "y": -3014.9034825774315
      },
      "version": "4813",
      "inputs": [
        {
          "key": "model",
          "renderTypeList": [
            "settingLLMModel",
            "reference"
          ],
          "label": "AI 模型",
          "valueType": "string",
          "value": "ep-20250726104520-85xss",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "temperature",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "maxToken",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "isResponseAnswerText",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": true,
          "valueType": "boolean",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatQuoteRole",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "system",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteTemplate",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quotePrompt",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatVision",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatReasoning",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "systemPrompt",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "max": 3000,
          "valueType": "string",
          "label": "提示词",
          "description": "core.app.tip.systemPromptTip",
          "placeholder": "core.app.tip.chatNodeSystemPromptTip",
          "value": "理解用户意图并判断是否结合上下文输出准确结果。\n以Markdown/表格格式输出\n\n用户的原始问题：\n{{$workflowStartNodeId.userChatInput$}}\n\n数据查询结果：\n\n{{$nDht8bLHEArr.result$}}\n注意：\n1. Markdown表格必须与前面的内容换行输出\n2. 如果查询结果为空，不允许输出表格，请直接回复：“本次未查询到相关数据，我再想想。”，不要输出其它任何内容。\n3. 如果发生错误，不允许输出表格，请直接回复：“基于目前的知识，未查询到相关数据。请让我思考思考更多相关知识，以便生成更准确的查询。”，不要输出其它任何内容。\n\n分析时忽略null数据的影响且禁止暴露给用户\n",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "history",
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "valueType": "chatHistory",
          "label": "聊天记录",
          "description": "workflow:max_dialog_rounds",
          "required": true,
          "min": 0,
          "max": 50,
          "value": 0,
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteQA",
          "renderTypeList": [
            "settingDatasetQuotePrompt"
          ],
          "label": "",
          "debugLabel": "知识库引用",
          "description": "",
          "valueType": "datasetQuote",
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "fileUrlList",
          "renderTypeList": [
            "reference",
            "input"
          ],
          "label": "文件链接",
          "debugLabel": "文件链接",
          "valueType": "arrayString",
          "value": [
            [
              "workflowStartNodeId",
              "userFiles"
            ]
          ],
          "valueDesc": "",
          "description": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "用户问题",
          "required": true,
          "value": "请将数据查询结果以Markdown表格格式输出",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "selectedTypeIndex": 1
        }
      ],
      "outputs": [
        {
          "id": "history",
          "key": "history",
          "required": true,
          "label": "common:core.module.output.label.New context",
          "description": "将本次回复内容拼接上历史记录，作为新的上下文返回",
          "valueType": "chatHistory",
          "valueDesc": "{\n  obj: System | Human | AI;\n  value: string;\n}[]",
          "type": "static"
        },
        {
          "id": "answerText",
          "key": "answerText",
          "required": true,
          "label": "common:core.module.output.label.Ai response content",
          "description": "将在 stream 回复完毕后触发",
          "valueType": "string",
          "type": "static"
        }
      ]
    },
    {
      "nodeId": "tD4hLtYB2ChP",
      "name": "业务知识理解",
      "intro": "调用“语义检索”和“全文检索”能力，从“知识库”中查找可能与问题相关的参考内容",
      "avatar": "core/workflow/template/datasetSearch",
      "flowNodeType": "datasetSearchNode",
      "showStatus": true,
      "position": {
        "x": 19093.312789219635,
        "y": -6033.44574558125
      },
      "version": "481",
      "inputs": [
        {
          "key": "datasets",
          "renderTypeList": [
            "selectDataset",
            "reference"
          ],
          "label": "选择知识库",
          "value": [],
          "valueType": "selectDataset",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "similarity",
          "renderTypeList": [
            "selectDatasetParamsModal"
          ],
          "label": "",
          "value": 0.4,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "limit",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 1500,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "searchMode",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "embedding",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "usingReRank",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchUsingExtensionQuery",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchExtensionModel",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchExtensionBg",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "authTmbId",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "需要检索的内容",
          "required": true,
          "value": [
            "workflowStartNodeId",
            "userChatInput"
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": ""
        },
        {
          "key": "collectionFilterMatch",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "label": "集合元数据过滤",
          "valueType": "string",
          "isPro": true,
          "description": "workflow:filter_description",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "quoteQA",
          "key": "quoteQA",
          "label": "common:core.module.Dataset quote.label",
          "description": "特殊数组格式，搜索结果为空时，返回空数组。",
          "type": "static",
          "valueType": "datasetQuote",
          "valueDesc": "{\n  id: string;\n  datasetId: string;\n  collectionId: string;\n  sourceName: string;\n  sourceId?: string;\n  q: string;\n  a: string\n}[]"
        }
      ]
    },
    {
      "nodeId": "dkFqVn9QkLXa",
      "name": "判断器",
      "intro": "根据一定的条件，执行不同的分支。",
      "avatar": "core/workflow/template/ifelse",
      "flowNodeType": "ifElseNode",
      "showStatus": true,
      "position": {
        "x": 8831.71482698771,
        "y": -1575.518826534912
      },
      "version": "481",
      "inputs": [
        {
          "key": "ifElseList",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "any",
          "label": "",
          "value": [
            {
              "condition": "AND",
              "list": [
                {
                  "variable": [
                    "VARIABLE_NODE_ID",
                    "search_index"
                  ],
                  "condition": "greaterThan",
                  "value": "3"
                }
              ]
            },
            {
              "condition": "AND",
              "list": [
                {
                  "variable": [
                    "ef52KtwkRPIb",
                    "answerText"
                  ],
                  "condition": "include",
                  "value": "业务相关知识"
                }
              ]
            },
            {
              "condition": "AND",
              "list": [
                {
                  "variable": [
                    "ef52KtwkRPIb",
                    "answerText"
                  ],
                  "condition": "include",
                  "value": "未查询到"
                }
              ]
            }
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "ifElseResult",
          "key": "ifElseResult",
          "label": "workflow:judgment_result",
          "valueType": "string",
          "type": "static",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "weJnyI96ucXU",
      "name": "用于隔离SQL内容和表格#4",
      "intro": "该模块可以直接回复一段指定的内容。常用于引导、提示。非字符串内容传入时，会转成字符串进行输出。",
      "avatar": "core/workflow/template/reply",
      "flowNodeType": "answerNode",
      "position": {
        "x": 17389.98260876465,
        "y": 770.1907145987943
      },
      "version": "481",
      "inputs": [
        {
          "key": "text",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "valueType": "any",
          "required": true,
          "label": "回复的内容",
          "description": "common:core.module.input.description.Response content",
          "placeholder": "common:core.module.input.description.Response content",
          "value": "",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": []
    },
    {
      "nodeId": "u62cSH05kmnp",
      "name": "数据可视化",
      "intro": "根据用户的历史记录和当前问题判断该次提问的类型。可以添加多组问题类型，下面是一个模板例子:\n类型1: 打招呼\n类型2: 关于商品“使用”问题\n类型3: 关于商品“购买”问题\n类型4: 其他问题",
      "avatar": "core/workflow/template/questionClassify",
      "flowNodeType": "classifyQuestion",
      "showStatus": true,
      "position": {
        "x": 9497.76122471259,
        "y": 144.41321028703408
      },
      "version": "481",
      "inputs": [
        {
          "key": "model",
          "renderTypeList": [
            "selectLLMModel",
            "reference"
          ],
          "label": "AI 模型",
          "required": true,
          "valueType": "string",
          "llmModelType": "classify",
          "value": "ep-20250213174309-7lvhb",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "systemPrompt",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "max": 3000,
          "valueType": "string",
          "label": "背景知识",
          "description": "core.module.input.description.Background",
          "placeholder": "core.module.input.placeholder.Classify background",
          "value": "",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "history",
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "valueType": "chatHistory",
          "label": "聊天记录",
          "description": "workflow:max_dialog_rounds",
          "required": true,
          "min": 0,
          "max": 50,
          "value": 0,
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "用户输入的问题（问题需要完善）",
          "required": true,
          "value": "在分析数据并选择可视化图表时需综合考虑数据类型、分析重点与受众需求。以下为常见图表的核心适用场景供参考：\n\n需要可视化的数据：\n{{$nDht8bLHEArr.result$}}\n\n用户问题：\n{{$workflowStartNodeId.userChatInput$}}。\n\n饼图——当需突出各部分占整体比例且分类数量≤6时适用，尤其适合回答\"各成分占比多少\"类问题。注意分类过多会导致切片辨识度下降。\n\n条形图——处理分类名称较长或需要横向对比排序时优先选择。支持较多分类数量（通常≤15项），利用水平布局避免文字重叠。\n\n柱状图——适合强调不同类别间数值差异对比，分类数量建议控制在8个以内。当分类标签较短且需要直观显示高度差异时效果最佳，超量时建议切换为条形图。\n\n折线图——核心用于揭示时间序列趋势或连续变量间关系。当数据包含日期、年份等时间维度且需要展示波动规律、增长轨迹时首选，最少需要3个时间点数据。\n\n无需图表——当数据仅包含一条数值时，无需使用图表。\n\n其他——但上面都不符合用户要求时\n",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "selectedTypeIndex": 1
        },
        {
          "renderTypeList": [
            "custom"
          ],
          "valueType": "any",
          "label": "",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "key": "agents",
          "value": [
            {
              "value": "柱状图",
              "key": "wqre"
            },
            {
              "value": "条形图",
              "key": "sdfa"
            },
            {
              "value": "饼图",
              "key": "agex"
            },
            {
              "value": "不需要可视化",
              "key": "pCNhrB7VUaMx"
            },
            {
              "value": "折线图",
              "key": "y1i41bWVHPpf"
            },
            {
              "value": "其他",
              "key": "sE1codbiVL3m"
            }
          ]
        }
      ],
      "outputs": [
        {
          "id": "cqResult",
          "key": "cqResult",
          "required": true,
          "label": "workflow:classification_result",
          "valueType": "string",
          "type": "static",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "alyUXdHqvOXW",
      "name": "数据可视化",
      "intro": "AI 大模型对话",
      "avatar": "core/workflow/template/aiChat",
      "flowNodeType": "chatNode",
      "showStatus": true,
      "position": {
        "x": 13407.13271243839,
        "y": 945.4586851505435
      },
      "version": "4813",
      "inputs": [
        {
          "key": "model",
          "renderTypeList": [
            "settingLLMModel",
            "reference"
          ],
          "label": "AI 模型",
          "valueType": "string",
          "value": "ep-20250213174309-7lvhb",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "temperature",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "maxToken",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "isResponseAnswerText",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": false,
          "valueType": "boolean",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatQuoteRole",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "system",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteTemplate",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quotePrompt",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatVision",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatReasoning",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "systemPrompt",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "max": 3000,
          "valueType": "string",
          "label": "提示词",
          "description": "core.app.tip.systemPromptTip",
          "placeholder": "core.app.tip.chatNodeSystemPromptTip",
          "value": "你是一个专业的mermaid图表生成器，专门将结构化数据转换为mermaid饼图代码。",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "history",
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "valueType": "chatHistory",
          "label": "聊天记录",
          "description": "workflow:max_dialog_rounds",
          "required": true,
          "min": 0,
          "max": 50,
          "value": 0,
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteQA",
          "renderTypeList": [
            "settingDatasetQuotePrompt"
          ],
          "label": "",
          "debugLabel": "知识库引用",
          "description": "",
          "valueType": "datasetQuote",
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "fileUrlList",
          "renderTypeList": [
            "reference",
            "input"
          ],
          "label": "文件链接",
          "debugLabel": "文件链接",
          "valueType": "arrayString",
          "value": [
            [
              "workflowStartNodeId",
              "userFiles"
            ]
          ],
          "valueDesc": "",
          "description": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "用户问题",
          "required": true,
          "value": "你是一个专业的数据处理与Mermaid图表生成专家，负责分析输入数据中的文字内容并将其转换为符合Mermaid饼图代码格式的输出。你的目标是确保输出结果满足以下所有规则，同时保持数值部分不变。\n\n\n数据结果对应的用户问题：\n{{$workflowStartNodeId.userChatInput$}}\n\n\n数据如下：{{$nDht8bLHEArr.result$}}\n\n## 执行流程\n1. **分析输入数据**：\n   - 确定数据中的标题、标签和数值。\n   - 对标签中的文字内容应用简化规则（详见“简化规则”部分）。\n2. **生成Mermaid代码**：\n   - 按照指定模板生成Mermaid饼图代码。\n   - 确保所有标签和数值准确无误地插入到代码中。\n3. **输出结果**：\n   - 直接返回生成的Mermaid代码，不包含任何解释或额外文本。\n\n## 数据格式说明\n\n## 输出格式要求\n生成的Mermaid代码必须严格遵循以下模板：\n```mermaid\npie title [标题]\n    \"[简化后的标签1]\" : 数值1\n    \"[简化后的标签2]\" : 数值2\n    ...\n```\n\n## 简化规则\n在生成Mermaid代码之前，需对描述冗余或过于复杂的每个标签的文字内容进行简化处理（对于已经很简短的标签，无需简化）。具体规则如下：\n{{$zL0egqHvMoXv.quoteQA$}}\n\n---\n\n## 注意事项\n1. **数值保护**：任何数值（如 `123`, `45.67`）不得修改。\n2. **大小写敏感**：在处理字母时，严格保留原始大小写。\n3. **输出格式**：结果必须简洁明了，无额外说明或注释。\n4. **避免绘制单一占比**：如果只有一项占比数据，例如某个数据的占比是0.3，请补充一个“其它”项，占比为1-0.3即0.7。\n5. **Mermaid代码规范**：\n   - 标题与输入完全一致。\n   - 标签使用双引号包裹。\n   - 确保代码可立即在Mermaid环境中渲染。\n分析时忽略null数据的影响且禁止暴露给用户",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "selectedTypeIndex": 1
        }
      ],
      "outputs": [
        {
          "id": "history",
          "key": "history",
          "required": true,
          "label": "common:core.module.output.label.New context",
          "description": "将本次回复内容拼接上历史记录，作为新的上下文返回",
          "valueType": "chatHistory",
          "valueDesc": "{\n  obj: System | Human | AI;\n  value: string;\n}[]",
          "type": "static"
        },
        {
          "id": "answerText",
          "key": "answerText",
          "required": true,
          "label": "common:core.module.output.label.Ai response content",
          "description": "将在 stream 回复完毕后触发",
          "valueType": "string",
          "type": "static"
        }
      ]
    },
    {
      "nodeId": "v35V5voh8Hq8",
      "name": "代码运行#3",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": 14392.919538739305,
        "y": 1145.9586851505435
      },
      "version": "482",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:these_variables_will_be_input_parameters_for_code_execution",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "value": "function main(data1) {\n  // 从输入对象中安全获取 Mermaid 代码\n  const mermaidCode = data1?.data1 || '';\n  \n  // 将每行开头的4个空格替换为2个空格，适配Mermaid缩进要求\n  return mermaidCode.replace(/^( {4})/gm, '  ');\n}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "data1",
          "label": "data1",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "value": [
            "alyUXdHqvOXW",
            "answerText"
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "workflow:full_response_data",
          "valueType": "object",
          "type": "static",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "workflow:execution_error",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "result",
          "valueType": "string",
          "label": "result",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "xEAAIKz05Szi",
      "name": "数据可视化",
      "intro": "该模块可以直接回复一段指定的内容。常用于引导、提示。非字符串内容传入时，会转成字符串进行输出。",
      "avatar": "core/workflow/template/reply",
      "flowNodeType": "answerNode",
      "position": {
        "x": 15041.31643910629,
        "y": 1432.4586851505435
      },
      "version": "481",
      "inputs": [
        {
          "key": "text",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "valueType": "any",
          "required": true,
          "label": "回复的内容",
          "description": "common:core.module.input.description.Response content",
          "placeholder": "common:core.module.input.description.Response content",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": "",
          "selectedTypeIndex": 1,
          "value": [
            "v35V5voh8Hq8",
            "system_rawResponse"
          ]
        }
      ],
      "outputs": []
    },
    {
      "nodeId": "qACqEdzHhFlW",
      "name": "数据可视化",
      "intro": "AI 大模型对话",
      "avatar": "core/workflow/template/aiChat",
      "flowNodeType": "chatNode",
      "showStatus": true,
      "position": {
        "x": 13407.13271243839,
        "y": -436.24585141868954
      },
      "version": "4813",
      "inputs": [
        {
          "key": "model",
          "renderTypeList": [
            "settingLLMModel",
            "reference"
          ],
          "label": "AI 模型",
          "valueType": "string",
          "value": "ep-20250213174309-7lvhb",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "temperature",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "maxToken",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "isResponseAnswerText",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": false,
          "valueType": "boolean",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatQuoteRole",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "system",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteTemplate",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quotePrompt",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatVision",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatReasoning",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "systemPrompt",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "max": 3000,
          "valueType": "string",
          "label": "提示词",
          "description": "core.app.tip.systemPromptTip",
          "placeholder": "core.app.tip.chatNodeSystemPromptTip",
          "value": "你是一个专业的mermaid图表生成器，专门将结构化数据转换为mermaid条形图代码。",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "history",
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "valueType": "chatHistory",
          "label": "聊天记录",
          "description": "workflow:max_dialog_rounds",
          "required": true,
          "min": 0,
          "max": 50,
          "value": 0,
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteQA",
          "renderTypeList": [
            "settingDatasetQuotePrompt"
          ],
          "label": "",
          "debugLabel": "知识库引用",
          "description": "",
          "valueType": "datasetQuote",
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "fileUrlList",
          "renderTypeList": [
            "reference",
            "input"
          ],
          "label": "文件链接",
          "debugLabel": "文件链接",
          "valueType": "arrayString",
          "value": [
            [
              "workflowStartNodeId",
              "userFiles"
            ]
          ],
          "valueDesc": "",
          "description": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "用户问题",
          "required": true,
          "value": "你是一个Mermaid条形图生成专家，负责将输入数据转换为规范的可视化代码。请遵循以下处理流程：\n\n数据结果对应的用户问题：\n{{$workflowStartNodeId.userChatInput$}}\n\n数据如下：{{$nDht8bLHEArr.result$}}\n\n执行步骤：\n1 解析输入数据中的标题、标签、数值\n2 应用品牌/型号/时空转换规则生成简化标签\n3 根据模板生成Mermaid代码：\n```mermaid\n%%{init: {\"themeVariables\": {\n\"xyChart\": {\n\"titleColor\": \"#333333\",\n\"xAxisLabelColor\": \"#666666\",\n\"xAxisTitleColor\": \"#ff0000\",\n\"xAxisTickColor\": \"#cccccc\",\n\"xAxisLineColor\": \"#999999\",\n\"yAxisLabelColor\": \"#444444\",\n\"yAxisTitleColor\": \"#444444\",\n\"yAxisTickColor\": \"#dddddd\",\n\"yAxisLineColor\": \"#aaaaaa\",\n\"plotColorPalette\": \"#4e79a7,#f28e2c,#e15759,#76b7b2,#59a14f\"\n}} } }%%\n\nxychart-beta horizontal\ntitle \"[标题]\"\nx-axis [\"SaS24\", \"HW\", \"iP\", \"2312\", \"ALT\", \"Q4'23\", \"PEK\"]\ny-axis \"销售量（万台）\" 0 --> 1000\nbar [500, 300, 700, 450, 320, 880, 620]\n```\n\n4 自动优化：检查x轴密度决定是否转换单位，保持配色清晰度\n\n输出要求：\n• 严格保留原始大小写\n• 仅输出可直接渲染的完整Mermaid代码\n• 标签必须用双引号包裹\n• 杜绝任何额外文字说明\n分析时忽略null数据的影响且禁止暴露给用户",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "selectedTypeIndex": 1
        }
      ],
      "outputs": [
        {
          "id": "history",
          "key": "history",
          "required": true,
          "label": "common:core.module.output.label.New context",
          "description": "将本次回复内容拼接上历史记录，作为新的上下文返回",
          "valueType": "chatHistory",
          "valueDesc": "{\n  obj: System | Human | AI;\n  value: string;\n}[]",
          "type": "static"
        },
        {
          "id": "answerText",
          "key": "answerText",
          "required": true,
          "label": "common:core.module.output.label.Ai response content",
          "description": "将在 stream 回复完毕后触发",
          "valueType": "string",
          "type": "static"
        }
      ]
    },
    {
      "nodeId": "qKArJ5Dzj8of",
      "name": "数据可视化",
      "intro": "该模块可以直接回复一段指定的内容。常用于引导、提示。非字符串内容传入时，会转成字符串进行输出。",
      "avatar": "core/workflow/template/reply",
      "flowNodeType": "answerNode",
      "position": {
        "x": 15076.535736411075,
        "y": 50.754148581310346
      },
      "version": "481",
      "inputs": [
        {
          "key": "text",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "valueType": "any",
          "required": true,
          "label": "回复的内容",
          "description": "common:core.module.input.description.Response content",
          "placeholder": "common:core.module.input.description.Response content",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": "",
          "selectedTypeIndex": 1,
          "value": [
            "cPFGMszCU8fc",
            "system_rawResponse"
          ]
        }
      ],
      "outputs": []
    },
    {
      "nodeId": "cPFGMszCU8fc",
      "name": "代码运行#5",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": 14392.919538739305,
        "y": -235.74585141868954
      },
      "version": "482",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:these_variables_will_be_input_parameters_for_code_execution",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "value": "function main(data1) {\n  // 从输入对象中安全获取 Mermaid 代码\n  const mermaidCode = data1?.data1 || '';\n  \n  // 将每行开头的4个空格替换为2个空格，适配Mermaid缩进要求\n  return mermaidCode;\n}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "data1",
          "label": "data1",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "value": [
            "qACqEdzHhFlW",
            "answerText"
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "workflow:full_response_data",
          "valueType": "object",
          "type": "static",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "workflow:execution_error",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "result",
          "valueType": "string",
          "label": "result",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "toxodU5VgmFA",
      "name": "用于隔离SQL内容和表格#8",
      "intro": "该模块可以直接回复一段指定的内容。常用于引导、提示。非字符串内容传入时，会转成字符串进行输出。",
      "avatar": "core/workflow/template/reply",
      "flowNodeType": "answerNode",
      "position": {
        "x": 8009.6797337070775,
        "y": 749.4132102870341
      },
      "version": "481",
      "inputs": [
        {
          "key": "text",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "valueType": "any",
          "required": true,
          "label": "回复的内容",
          "description": "common:core.module.input.description.Response content",
          "placeholder": "common:core.module.input.description.Response content",
          "value": "",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": []
    },
    {
      "nodeId": "r7vGatIkVwXd",
      "name": "数据可视化",
      "intro": "AI 大模型对话",
      "avatar": "core/workflow/template/aiChat",
      "flowNodeType": "chatNode",
      "showStatus": true,
      "position": {
        "x": 13407.13271243839,
        "y": -1867.824033738389
      },
      "version": "4813",
      "inputs": [
        {
          "key": "model",
          "renderTypeList": [
            "settingLLMModel",
            "reference"
          ],
          "label": "AI 模型",
          "valueType": "string",
          "value": "ep-20250213174309-7lvhb",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "temperature",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "maxToken",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "isResponseAnswerText",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": false,
          "valueType": "boolean",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatQuoteRole",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "system",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteTemplate",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quotePrompt",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatVision",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatReasoning",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "systemPrompt",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "max": 3000,
          "valueType": "string",
          "label": "提示词",
          "description": "core.app.tip.systemPromptTip",
          "placeholder": "core.app.tip.chatNodeSystemPromptTip",
          "value": "你是一个专业的mermaid图表生成器，专门将结构化数据转换为mermaid柱状图图代码。",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "history",
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "valueType": "chatHistory",
          "label": "聊天记录",
          "description": "workflow:max_dialog_rounds",
          "required": true,
          "min": 0,
          "max": 50,
          "value": 0,
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteQA",
          "renderTypeList": [
            "settingDatasetQuotePrompt"
          ],
          "label": "",
          "debugLabel": "知识库引用",
          "description": "",
          "valueType": "datasetQuote",
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "fileUrlList",
          "renderTypeList": [
            "reference",
            "input"
          ],
          "label": "文件链接",
          "debugLabel": "文件链接",
          "valueType": "arrayString",
          "value": [
            [
              "workflowStartNodeId",
              "userFiles"
            ]
          ],
          "valueDesc": "",
          "description": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "用户问题",
          "required": true,
          "value": "你是一个Mermaid柱状图生成专家，负责将输入数据转换为规范的可视化代码。请遵循以下处理流程：\n\n数据结果对应的用户问题：\n{{$workflowStartNodeId.userChatInput$}}\n数据如下：{{$nDht8bLHEArr.result$}}\n\n执行步骤：\n① 解析输入数据中的标题、标签、数值\n② 应用品牌/型号/时空转换规则生成简化标签\n③ 根据模板生成Mermaid代码：\n```mermaid\n%%{init: {\"themeVariables\": {\n\"xyChart\": {\n\"titleColor\": \"#333333\",\n\"xAxisLabelColor\": \"#666666\",\n\"xAxisTitleColor\": \"#ff0000\",\n\"xAxisTickColor\": \"#cccccc\",\n\"xAxisLineColor\": \"#999999\",\n\"yAxisLabelColor\": \"#444444\",\n\"yAxisTitleColor\": \"#444444\",\n\"yAxisTickColor\": \"#dddddd\",\n\"yAxisLineColor\": \"#aaaaaa\",\n\"plotColorPalette\": \"#4e79a7,#f28e2c,#e15759,#76b7b2,#59a14f\"\n}} } }%%\nxychart-beta \ntitle \"[标题]\"\nx-axis [\"Sa\", \"HW\", \"iP\", \"2312\", \"ALT\", \"Q4'23\", \"PEK\"]\ny-axis \"销售量（万台）\" 0 --> 1000\nbar [500, 300, 700, 450, 320, 880, 620]\n```\n\n④ 自动优化：检查x轴密度决定是否转换单位，保持配色清晰度\n\n输出要求：\n• 严格保留原始大小写\n• 仅输出可直接渲染的完整Mermaid代码\n• 标签必须用双引号包裹\n• 杜绝任何额外文字说明\n分析时忽略null数据的影响且禁止暴露给用户",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "selectedTypeIndex": 1
        }
      ],
      "outputs": [
        {
          "id": "history",
          "key": "history",
          "required": true,
          "label": "common:core.module.output.label.New context",
          "description": "将本次回复内容拼接上历史记录，作为新的上下文返回",
          "valueType": "chatHistory",
          "valueDesc": "{\n  obj: System | Human | AI;\n  value: string;\n}[]",
          "type": "static"
        },
        {
          "id": "answerText",
          "key": "answerText",
          "required": true,
          "label": "common:core.module.output.label.Ai response content",
          "description": "将在 stream 回复完毕后触发",
          "valueType": "string",
          "type": "static"
        }
      ]
    },
    {
      "nodeId": "qxjHkDwIH1aw",
      "name": "代码运行#5",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": 14392.919538739305,
        "y": -1667.324033738389
      },
      "version": "482",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:these_variables_will_be_input_parameters_for_code_execution",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "value": "function main(data1) {\n  // 从输入对象中安全获取 Mermaid 代码\n  const mermaidCode = data1?.data1 || '';\n  \n  // 将每行开头的4个空格替换为2个空格，适配Mermaid缩进要求\n  return mermaidCode;\n}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "data1",
          "label": "data1",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "value": [
            "r7vGatIkVwXd",
            "answerText"
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "workflow:full_response_data",
          "valueType": "object",
          "type": "static",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "workflow:execution_error",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "result",
          "valueType": "string",
          "label": "result",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "qU3iPCZewCzy",
      "name": "数据可视化",
      "intro": "该模块可以直接回复一段指定的内容。常用于引导、提示。非字符串内容传入时，会转成字符串进行输出。",
      "avatar": "core/workflow/template/reply",
      "flowNodeType": "answerNode",
      "position": {
        "x": 15015.238732008827,
        "y": -1380.824033738389
      },
      "version": "481",
      "inputs": [
        {
          "key": "text",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "valueType": "any",
          "required": true,
          "label": "回复的内容",
          "description": "common:core.module.input.description.Response content",
          "placeholder": "common:core.module.input.description.Response content",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": "",
          "selectedTypeIndex": 1,
          "value": [
            "qxjHkDwIH1aw",
            "system_rawResponse"
          ]
        }
      ],
      "outputs": []
    },
    {
      "nodeId": "t815PGDCQWlq",
      "name": "数据可视化#11",
      "intro": "AI 大模型对话",
      "avatar": "core/workflow/template/aiChat",
      "flowNodeType": "chatNode",
      "showStatus": true,
      "position": {
        "x": 13407.13271243839,
        "y": 2536.7643142666793
      },
      "version": "4813",
      "inputs": [
        {
          "key": "model",
          "renderTypeList": [
            "settingLLMModel",
            "reference"
          ],
          "label": "AI 模型",
          "valueType": "string",
          "value": "ep-20250213174309-7lvhb",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "temperature",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "maxToken",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "isResponseAnswerText",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": false,
          "valueType": "boolean",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatQuoteRole",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "system",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteTemplate",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quotePrompt",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatVision",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatReasoning",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "systemPrompt",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "max": 3000,
          "valueType": "string",
          "label": "提示词",
          "description": "core.app.tip.systemPromptTip",
          "placeholder": "core.app.tip.chatNodeSystemPromptTip",
          "value": "你是一个专业的mermaid图表生成器，专门将结构化数据转换为mermaid折线图代码。",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "history",
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "valueType": "chatHistory",
          "label": "聊天记录",
          "description": "workflow:max_dialog_rounds",
          "required": true,
          "min": 0,
          "max": 50,
          "value": 0,
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteQA",
          "renderTypeList": [
            "settingDatasetQuotePrompt"
          ],
          "label": "",
          "debugLabel": "知识库引用",
          "description": "",
          "valueType": "datasetQuote",
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "fileUrlList",
          "renderTypeList": [
            "reference",
            "input"
          ],
          "label": "文件链接",
          "debugLabel": "文件链接",
          "valueType": "arrayString",
          "value": [
            [
              "workflowStartNodeId",
              "userFiles"
            ]
          ],
          "valueDesc": "",
          "description": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "用户问题",
          "required": true,
          "value": "你是一个Mermaid折线图生成专家，负责将输入数据转换为规范的可视化代码。请遵循以下处理流程：\n\n数据结果对应的用户问题：\n{{$workflowStartNodeId.userChatInput$}}\n\n数据如下：{{$nDht8bLHEArr.result$}}\n\n\n执行步骤：\n① 解析输入数据中的标题、标签、数值\n② 应用品牌/型号/时空转换规则生成简化标签\n③ 根据模板生成Mermaid代码：\n```mermaid\n%%{init: {\"themeVariables\": {\n\"xyChart\": {\n\"titleColor\": \"#333333\",\n\"xAxisLabelColor\": \"#666666\",\n\"xAxisTitleColor\": \"#ff0000\",\n\"xAxisTickColor\": \"#cccccc\",\n\"xAxisLineColor\": \"#999999\",\n\"yAxisLabelColor\": \"#444444\",\n\"yAxisTitleColor\": \"#444444\",\n\"yAxisTickColor\": \"#dddddd\",\n\"yAxisLineColor\": \"#aaaaaa\",\n\"plotColorPalette\": \"#4e79a7,#f28e2c,#e15759,#76b7b2,#59a14f\"\n}} } }%%\nxychart-beta \ntitle \"[标题]\"\nx-axis [\"Sa\", \"HW\", \"iP\", \"2312\", \"ALT\", \"Q4'23\", \"PEK\"]\ny-axis \"销售量（万台）\" 0 --> 1000\nline [500, 300, 700, 450, 320, 880, 620]\n```\n\n④ 自动优化：检查x轴密度决定是否转换单位，保持配色清晰度\n\n输出要求：\n• 严格保留原始大小写\n• 仅输出可直接渲染的完整Mermaid代码\n• 标签必须用双引号包裹\n• 杜绝任何额外文字说明\n\n分析时忽略null数据的影响且禁止暴露给用户",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "selectedTypeIndex": 1
        }
      ],
      "outputs": [
        {
          "id": "history",
          "key": "history",
          "required": true,
          "label": "common:core.module.output.label.New context",
          "description": "将本次回复内容拼接上历史记录，作为新的上下文返回",
          "valueType": "chatHistory",
          "valueDesc": "{\n  obj: System | Human | AI;\n  value: string;\n}[]",
          "type": "static"
        },
        {
          "id": "answerText",
          "key": "answerText",
          "required": true,
          "label": "common:core.module.output.label.Ai response content",
          "description": "将在 stream 回复完毕后触发",
          "valueType": "string",
          "type": "static"
        }
      ]
    },
    {
      "nodeId": "xdBaTiVtuGMN",
      "name": "代码运行#5",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": 14404.46870756862,
        "y": 2737.2643142666793
      },
      "version": "482",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:these_variables_will_be_input_parameters_for_code_execution",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "value": "function main(data1) {\n  // 从输入对象中安全获取 Mermaid 代码\n  const mermaidCode = data1?.data1 || '';\n  \n  // 将每行开头的4个空格替换为2个空格，适配Mermaid缩进要求\n  return mermaidCode;\n}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "data1",
          "label": "data1",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "value": [
            "t815PGDCQWlq",
            "answerText"
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "workflow:full_response_data",
          "valueType": "object",
          "type": "static",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "workflow:execution_error",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "result",
          "valueType": "string",
          "label": "result",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "x0K4mwLVvqSY",
      "name": "数据可视化#8",
      "intro": "该模块可以直接回复一段指定的内容。常用于引导、提示。非字符串内容传入时，会转成字符串进行输出。",
      "avatar": "core/workflow/template/reply",
      "flowNodeType": "answerNode",
      "position": {
        "x": 15069.535736411075,
        "y": 3013.76431426668
      },
      "version": "481",
      "inputs": [
        {
          "key": "text",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "valueType": "any",
          "required": true,
          "label": "回复的内容",
          "description": "common:core.module.input.description.Response content",
          "placeholder": "common:core.module.input.description.Response content",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": "",
          "selectedTypeIndex": 1,
          "value": [
            "xdBaTiVtuGMN",
            "system_rawResponse"
          ]
        }
      ],
      "outputs": []
    },
    {
      "nodeId": "aWE2FuOjdzNU",
      "name": "表结构信息查询",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 3523.594319650788,
        "y": -1619.2248913930277
      },
      "version": "4813",
      "inputs": [
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "value": "表结构详细信息如下：\n口碑所属车型表：\nCREATE TABLE `dongchedi_review_data` (\n  `id` int NOT NULL AUTO_INCREMENT,\n  `md5id` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT '关键词ID md5',\n  `url` text CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci COMMENT 'url\\r\\n',\n  `car_review_type` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL,\n  `gid` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL,\n  `gid_str` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL,\n  `buy_car_info` text CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci,\n  `score_info` text CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci,\n  `image_urls` text CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci,\n  `user_info` text CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci,\n  `create_time` text CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci,\n  `digg_count_en` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL,\n  `comment_count_en` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL,\n  `user_digg` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL,\n  `user_bury` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL,\n  `article_type` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL,\n  `excellent_icon_type_light` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL,\n  `excellent_icon_type_dark` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL,\n  `fuel_form` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL,\n  `year` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL,\n  `car_id` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL,\n  `series_id` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL,\n  `car_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL,\n  `series_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL,\n  `comment_data` text CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci,\n  `collector` varchar(128) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT '采集服务器',\n  `collect_frequent` int DEFAULT NULL COMMENT '采集频率 10分 30分 1小时（60）4小时（240） 12小时 24小时 以分为单位 默认 1440（24小时） 一天',\n  `time_ranges` int DEFAULT NULL COMMENT '时间范围 以天为单位  默认 1 日更',\n  `state` varchar(1) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT '0' COMMENT '状态  0-未采集，1-采集中，2-采集完成，3-详情',\n  `cstate` varchar(1) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT '0' COMMENT '状态  0-未采集，1-采集中，2-采集完成，3-详情',\n  `update_time` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间 默认 当前时间',\n  `next_time` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '下次采集时间',\n  `input_time` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '录入时间',\n  `remarks` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT '备注',\n  `reserved1` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT '预留字段1',\n  `reserved2` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT '预留字段2',\n  `reserved3` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT '预留字段3',\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `md5` (`md5id`)\n) ENGINE=InnoDB AUTO_INCREMENT=14387 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='评论的没条数据';\n数据示例：17\t925dc43537c0bdfc511775861ac586ca\t\t1\t6958607593484849160\t6958607593484849160\tNone\t{'score': 464, 'comfort_score': 400, 'appearance_score': 500, 'configuration_score': 450, 'control_score': 450, 'power_score': 500, 'space_score': 450, 'interiors_score': 500, 'assist_driving_score': 0, 'smart_cockpit_score': 0, 'power_control_score': 0, 'oil_consumption_score': 0, 'continuation_score': 0, 'driving_score': 0}\t[{'img_type': 1, 'url': 'https://p3-dcd-sign.byteimg.com/motor-img/5e37dcf16a90536a57fc79da5a8791a6~tplv-resize:0:2048.image?lk3s=4326c8aa&x-expires=1762697545&x-signature=23VwfOd6%2BjtoFrNZoh8IoJHgoq4%3D&psm=motor.mp.car_review', 'width': 1500, 'height': 1000}, {'img_type': 1, 'url': 'https://p3-dcd-sign.byteimg.com/motor-img/a9304e71300bf6ce8ac062b51b2a0b4b~tplv-resize:0:2048.image?lk3s=4326c8aa&x-expires=1762697545&x-signature=j7qy9ac0bUgaYsFU8%2F7j1JyE4uI%3D&psm=motor.mp.car_review', 'width': 1500, 'height': 1000}, {'img_type': 1, 'url': 'https://p3-dcd-sign.byteimg.com/motor-img/33d496ee0678f149c0f5df2e663b743b~tplv-resize:0:2048.image?lk3s=4326c8aa&x-expires=1762697545&x-signature=q5bwwX%2B4RlQEmHqbfOrZacVekSo%3D&psm=motor.mp.car_review', 'width': 1500, 'height': 1000}]\t{'user_id': 3126600811937902, 'user_id_str': '3126600811937902', 'name': '型车志', 'avatar_url': 'https://p9-passport.byteacctimg.com/img/user-avatar/6c53dfca64ddaa2a2e93c56e791f6200~300x300.image', 'motor_auth_show_info': {'auth_v_type': 0, 'auth_v_desc': ''}, 'medal_list': [{'desc': '车评创作力LV1', 'desc_color': '#375CD1', 'desc_bg_color': '#2090AAFD', 'schema': '', 'icon': 'https://p3-dcd.byteimg.com/obj/tos-cn-i-dcdx/5dca4359462c211ae53ac967efc56334', 'type': 'medal_11'}, {'desc': '懂车评论员LV2', 'desc_color': '#5D439A', 'desc_bg_color': '#136734E1', 'schema': '', 'icon': 'https://p3-dcd.byteimg.com/obj/tos-cn-i-dcdx/2b354f854cfe85ae431e98d4c47a0f36', 'type': 'medal_15'}, {'desc': '2020年北京车展', 'desc_color': '#375CD1', 'desc_bg_color': '#2090AAFD', 'schema': '', 'icon': 'https://p3-dcd.byteimg.com/obj/tos-cn-i-dcdx/64b571dfbabfe4eb62ffcf7f81c063a9', 'type': 'medal_17'}, {'desc': '视频爆款大师LV2', 'desc_color': '#C9603F', 'desc_bg_color': '#30FFD5A4', 'schema': '', 'icon': 'https://p3-dcd.byteimg.com/obj/tos-cn-i-dcdx/c9cb558bacd790f5b8d2c5f3a44a9243', 'type': 'medal_25'}, {'desc': '车圈万人迷LV2', 'desc_color': '#375CD1', 'desc_bg_color': '#2090AAFD', 'schema': '', 'icon': 'https://p9-dcd.byteimg.com/obj/tos-cn-i-dcdx/3effa952bf445a3cdf55497d53ca5897', 'type': 'medal_27'}, {'desc': '内容鉴赏官LV1', 'desc_color': '#436657', 'desc_bg_color': '#1000A860', 'schema': '', 'icon': 'https://p3-dcd.byteimg.com/obj/tos-cn-i-dcdx/8edcc30c4fbcb6b41f9672d9243886f8', 'type': 'medal_28'}, {'desc': '懂车帝4周年', 'desc_color': '#59439A', 'desc_bg_color': '#106A47D1', 'schema': '', 'icon': 'https://p3.dcarimg.com/img/tos-cn-i-dcdx/3f00dc2d34754ba1b9f8a82b4d9fa4bf~noop.png', 'type': 'medal_44'}, {'desc': '超级车友节', 'desc_color': '#1F2129', 'desc_bg_color': '#12FFCC32', 'schema': '', 'icon': 'https://p9-dcd.byteimg.com/obj/tos-cn-i-dcdx/936d37439f0b04cc3067cd343c5915dd', 'type': 'medal_45'}], 'is_following': False, 'tag': ''}\t1620177084\t19\t1\t0\t0\t14\thttps://p3-dcd.byteimg.com/tos-cn-i-dcdx/05042d1490d1913da1ba45337a73b067~tplv-resize:0:0.image?psm=motor.mp.car_review\thttps://p3-dcd.byteimg.com/tos-cn-i-dcdx/a62cdef0fab7772306a61fb8351902aa~tplv-resize:0:0.image?psm=motor.mp.car_review\t1\t2019\t35694\t155\tCayenne Turbo Coupé 4.0T\tCayenne Coupé\t[{'comment_id': 7241737015099032378, 'comment_id_str': '7241737015099032378', 'user_info': {'user_id': 4475172533, 'user_id_str': '4475172533', 'name': '姜晓锋', 'avatar_url': 'https://p6-passport.byteacctimg.com/img/mosaic-legacy/3791/5070639578~120x256.image', 'motor_auth_show_info': None, 'medal_list': None, 'is_following': False, 'tag': ''}, 'user_digg': 0, 'digg_count_en': '0', 'is_author': False, 'text': '我就想知道卡宴现在烧机油还严重吗？一般多少公里烧机油？', 'reply_data': None, 'create_time': 1686098378, 'user_bury': 0, 'has_pic': False}]\t\t\t\t0\t0\t2025-10-10 22:12:26\t2025-08-15 17:02:17\t2025-08-15 17:02:17\t\t\t\t\t\t\t\n口碑拆句打标签表：\nCREATE TABLE dongchedi_sentiment_analysis (\n    sentence_id INT PRIMARY KEY AUTO_INCREMENT,    -- 唯一标识符，自动递增\n    original_sentence TEXT NOT NULL,               -- 原始句子文本\n    sentiment VARCHAR(20),                         -- 情感倾向（positive, negative, neutral）\n    sentiment_score VARCHAR(20),                   -- 情感得分（0到100之间）\n    opinion_analysis JSON,                         -- 维度分析结果，例如[ {  \"aspect\": \"性价比\",\"opinion\": \"好\", \"sentiment\": \"positive\",\"score\": 15}, {\"aspect\": \"质量\",\"opinion\": \"差\",\"sentiment\": \"negative\",\"score\": 20}]\n    sentence_complexity VARCHAR(20),               -- 句子的复杂度（high, medium, low）\n    text_type VARCHAR(50),                         -- 句子的文本类型（如评论、问答等）\n    source_id VARCHAR(255),                        -- 数据来源的标识符\n    source_name VARCHAR(255),                       -- 数据来源名称\n\t\tcreate_time datetime DEFAULT NULL COMMENT '创建时间',\n\t\tupdate_time datetime DEFAULT NULL COMMENT '更新时间'\n);\n  \n数据示例：514\t【外观酷炫】保时捷Cayenne的外观设计，基本上是属于“人见人爱”那一挂的，有跑车的范儿，回头率超高。\tpositive\t80\t[{\"score\": \"20\", \"aspect\": \"外观设计\", \"opinion\": \"好\", \"sentiment\": \"positive\"}, {\"score\": \"15\", \"aspect\": \"回头率\", \"opinion\": \"高\", \"sentiment\": \"positive\"}]\tmedium\t评论\t20\t车型口碑\t2025-10-11 17:41:20\t2025-10-11 17:41:20\n基本的查询思路：涉及到查车的，先理解到底是差的车型还是车系，基于这个车系，查到有哪些车，批量查询这些车的口碑信息，返回联表查询的口碑结果\n其它信息和要求：\n-注意区分车型和车系字段，不要混淆；\n-两个表之间通过source_id进行连接，表2的source_id即为表1的id\n-表1的create_time为业务真实创建时间，其他的所有时间均不可作为业务查询和输出使用\n-对指定车型和车系等，查询时请使用模糊查询(即使用like)；\n-用户询问分布时，对于连续值，请自行按一定区间进行划分，例如询问行驶总里程分布，需要按不同里程区间统计；",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "glaTug46Ye7U",
      "name": "数据可视化",
      "intro": "AI 大模型对话",
      "avatar": "core/workflow/template/aiChat",
      "flowNodeType": "chatNode",
      "showStatus": true,
      "position": {
        "x": 14411.46870756862,
        "y": 4245.4681485786405
      },
      "version": "4813",
      "inputs": [
        {
          "key": "model",
          "renderTypeList": [
            "settingLLMModel",
            "reference"
          ],
          "label": "AI 模型",
          "valueType": "string",
          "value": "ep-20250213174309-7lvhb",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "temperature",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "maxToken",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "isResponseAnswerText",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": false,
          "valueType": "boolean",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatQuoteRole",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "system",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteTemplate",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quotePrompt",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatVision",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatReasoning",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "systemPrompt",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "max": 3000,
          "valueType": "string",
          "label": "提示词",
          "description": "core.app.tip.systemPromptTip",
          "placeholder": "core.app.tip.chatNodeSystemPromptTip",
          "value": "你是一个专业的mermaid图表生成器，专门将结构化数据转换为mermaid折线图代码。",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "history",
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "valueType": "chatHistory",
          "label": "聊天记录",
          "description": "workflow:max_dialog_rounds",
          "required": true,
          "min": 0,
          "max": 50,
          "value": 0,
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteQA",
          "renderTypeList": [
            "settingDatasetQuotePrompt"
          ],
          "label": "",
          "debugLabel": "知识库引用",
          "description": "",
          "valueType": "datasetQuote",
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "fileUrlList",
          "renderTypeList": [
            "reference",
            "input"
          ],
          "label": "文件链接",
          "debugLabel": "文件链接",
          "valueType": "arrayString",
          "value": [
            [
              "workflowStartNodeId",
              "userFiles"
            ]
          ],
          "valueDesc": "",
          "description": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "用户问题",
          "required": true,
          "value": "你是一个 Mermaid 可视化输出专家，能够根据用户输入的数据和要求，匹配最适合的图表模板，并生成可直接渲染的 Mermaid 代码。请严格遵循以下规则和流程完成任务。\n\n## 执行流程\n1. **分析输入数据**  \n   - 解析用户提供的数据，识别数据类型（如流程图、时序图、甘特图等）。\n   - 确定用户需求（如用户要求的图表类型或特定样式）。\n\n2. **维度名称简化**  \n   - ​按提供的简化规则进行简化，避免绘图时属性名称过长。\n   - 注意简化后的内容和原始内容要有明显且易于理解的关系，不要过度简化导致数据难以理解。\n\n3. **匹配最合适的 Mermaid 模板**  \n   - 根据输入数据和用户要求，选择最佳的 Mermaid 图表模板。\n   - 如果用户未明确指定图表类型，根据数据特征推断最合适的模板。\n\n4. **生成优化后的可视化代码**  \n   - 输出符合 Mermaid 引擎规范的代码。\n   - 确保代码简洁、美观，并可根据需要优化配色。\n\n## 注意事项\n1. **输出要求**  \n   - 仅输出可直接渲染的 Mermaid 代码，不得包含任何其他内容或解释。\n   - 确保代码可通过 Mermaid 引擎直接渲染，且语法正确。\n\n2. **内容限制**  \n   - 完全避免生成任何非 Mermaid 内容（如注释、说明或其他无关字符）。\n\n3. **代码优化**  \n   - 确保代码简洁、易读，尽量优化配色以提升视觉效果。\n   - 不允许对生成的代码进行实际渲染或预览。\n\n4. **用户要求优先**  \n   - 如果用户明确指定了图表类型或样式，请严格遵循用户要求。\n   - 如果用户未明确要求，则根据数据特征选择最合适的模板。\n\n\n数据简化规则：\n​{{$zL0egqHvMoXv.quoteQA$}}\n\n注意：\n[Mermaid代码渲染指令]\n请严格遵循以下要求处理Mermaid代码：\n1. 识别以三个反引号包裹的Mermaid代码块（语法：```mermaid\\n...\\n```）\n2. 仅执行可视化渲染操作\n3. 禁止添加任何文字解释或注释\n4. 保持原始代码逻辑和结构不变\n5、渲染前输出“开始绘制的图表。”\n6、渲染后输出“上面是绘制的图表。”\n---\n\nmermaid可视化参考模板：\n{{$mCwvz2GbTDqn.quoteQA$}}\n\n查询到的数据：\n{{$ef52KtwkRPIb.answerText$}}\n\n## 用户问题\n用户要求：{{$workflowStartNodeId.userChatInput$}}\n\n分析时忽略null数据的影响且禁止暴露给用户",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "selectedTypeIndex": 1
        }
      ],
      "outputs": [
        {
          "id": "history",
          "key": "history",
          "required": true,
          "label": "common:core.module.output.label.New context",
          "description": "将本次回复内容拼接上历史记录，作为新的上下文返回",
          "valueType": "chatHistory",
          "valueDesc": "{\n  obj: System | Human | AI;\n  value: string;\n}[]",
          "type": "static"
        },
        {
          "id": "answerText",
          "key": "answerText",
          "required": true,
          "label": "common:core.module.output.label.Ai response content",
          "description": "将在 stream 回复完毕后触发",
          "valueType": "string",
          "type": "static"
        }
      ]
    },
    {
      "nodeId": "mCwvz2GbTDqn",
      "name": "智能选择图表",
      "intro": "调用“语义检索”和“全文检索”能力，从“知识库”中查找可能与问题相关的参考内容",
      "avatar": "core/workflow/template/datasetSearch",
      "flowNodeType": "datasetSearchNode",
      "showStatus": true,
      "position": {
        "x": 13509.944095103996,
        "y": 4525.4681485786405
      },
      "version": "481",
      "inputs": [
        {
          "key": "datasets",
          "renderTypeList": [
            "selectDataset",
            "reference"
          ],
          "label": "选择知识库",
          "value": [],
          "valueType": "selectDataset",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "similarity",
          "renderTypeList": [
            "selectDatasetParamsModal"
          ],
          "label": "",
          "value": 0.4,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "limit",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 1500,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "searchMode",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "embedding",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "usingReRank",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchUsingExtensionQuery",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchExtensionModel",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchExtensionBg",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "authTmbId",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "需要检索的内容",
          "required": true,
          "value": "根据要求和数据，给出合适的模板\n要求 {{$workflowStartNodeId.userChatInput$}}\n数据{{$ef52KtwkRPIb.answerText$}}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "selectedTypeIndex": 1
        },
        {
          "key": "collectionFilterMatch",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "label": "集合元数据过滤",
          "valueType": "string",
          "isPro": true,
          "description": "workflow:filter_description",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "quoteQA",
          "key": "quoteQA",
          "label": "common:core.module.Dataset quote.label",
          "description": "特殊数组格式，搜索结果为空时，返回空数组。",
          "type": "static",
          "valueType": "datasetQuote",
          "valueDesc": "{\n  id: string;\n  datasetId: string;\n  collectionId: string;\n  sourceName: string;\n  sourceId?: string;\n  q: string;\n  a: string\n}[]"
        }
      ]
    },
    {
      "nodeId": "dpPmkWrAWSbS",
      "name": "代码运行#6",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": 15342.535736411075,
        "y": 4445.9681485786405
      },
      "version": "482",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:these_variables_will_be_input_parameters_for_code_execution",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "value": "function main(data1) {\n  // 从输入对象中安全获取 Mermaid 代码\n  const mermaidCode = data1?.data1 || '';\n  \n  // 将每行开头的4个空格替换为2个空格，适配Mermaid缩进要求\n  return mermaidCode;\n}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "data1",
          "label": "data1",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "value": [
            "glaTug46Ye7U",
            "answerText"
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "workflow:full_response_data",
          "valueType": "object",
          "type": "static",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "workflow:execution_error",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "result",
          "valueType": "string",
          "label": "result",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "jC1JgLtteUmk",
      "name": "数据可视化#9",
      "intro": "该模块可以直接回复一段指定的内容。常用于引导、提示。非字符串内容传入时，会转成字符串进行输出。",
      "avatar": "core/workflow/template/reply",
      "flowNodeType": "answerNode",
      "position": {
        "x": 15936.920303575598,
        "y": 4732.4681485786405
      },
      "version": "481",
      "inputs": [
        {
          "key": "text",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "valueType": "any",
          "required": true,
          "label": "回复的内容",
          "description": "common:core.module.input.description.Response content",
          "placeholder": "common:core.module.input.description.Response content",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": "",
          "selectedTypeIndex": 1,
          "value": [
            "dpPmkWrAWSbS",
            "system_rawResponse"
          ]
        }
      ],
      "outputs": []
    },
    {
      "nodeId": "zn5Hgml4jILG",
      "name": "意图理解",
      "intro": "AI 大模型对话",
      "avatar": "core/workflow/template/aiChat",
      "flowNodeType": "chatNode",
      "showStatus": true,
      "position": {
        "x": 373.13273090427117,
        "y": -1613.6128362893191
      },
      "version": "4813",
      "inputs": [
        {
          "key": "model",
          "renderTypeList": [
            "settingLLMModel",
            "reference"
          ],
          "label": "AI 模型",
          "valueType": "string",
          "value": "ep-20250726104520-85xss",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "temperature",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "maxToken",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "isResponseAnswerText",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": false,
          "valueType": "boolean",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatQuoteRole",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "system",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteTemplate",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quotePrompt",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatVision",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatReasoning",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "systemPrompt",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "max": 3000,
          "valueType": "string",
          "label": "提示词",
          "description": "core.app.tip.systemPromptTip",
          "placeholder": "core.app.tip.chatNodeSystemPromptTip",
          "value": "你的职责是抽取当前提问意图，并判断是否需要根据当前意图，参考结合上下文合成综合意图，输出意图搜索关键词结果。\n--目标：输出这个是为了形成综合搜索关键词\n--是否需要结合上下文意图判断逻辑：当用户上下文意图是一件事时进行结合，如果是新的意图则不进行结合\n--不要直接回答问题，\n--禁止猜测\n--禁止说未提及\n--尽量还原原始真实意图而不是直接改写\n--禁止掺杂任何个人情感\n--必须包含主语对象\n--字数不超过15字\n--干净简洁直戳要害\n--限制：仅输出结果",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "history",
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "valueType": "chatHistory",
          "label": "聊天记录",
          "description": "workflow:max_dialog_rounds",
          "required": true,
          "min": 0,
          "max": 50,
          "value": 6,
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteQA",
          "renderTypeList": [
            "settingDatasetQuotePrompt"
          ],
          "label": "",
          "debugLabel": "知识库引用",
          "description": "",
          "valueType": "datasetQuote",
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "fileUrlList",
          "renderTypeList": [
            "reference",
            "input"
          ],
          "label": "文件链接",
          "debugLabel": "文件链接",
          "valueType": "arrayString",
          "value": [
            [
              "workflowStartNodeId",
              "userFiles"
            ]
          ],
          "valueDesc": "",
          "description": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "用户问题",
          "required": true,
          "value": [
            "workflowStartNodeId",
            "userChatInput"
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "selectedTypeIndex": 0
        }
      ],
      "outputs": [
        {
          "id": "history",
          "key": "history",
          "required": true,
          "label": "common:core.module.output.label.New context",
          "description": "将本次回复内容拼接上历史记录，作为新的上下文返回",
          "valueType": "chatHistory",
          "valueDesc": "{\n  obj: System | Human | AI;\n  value: string;\n}[]",
          "type": "static"
        },
        {
          "id": "answerText",
          "key": "answerText",
          "required": true,
          "label": "common:core.module.output.label.Ai response content",
          "description": "将在 stream 回复完毕后触发",
          "valueType": "string",
          "type": "static"
        }
      ]
    },
    {
      "nodeId": "nDht8bLHEArr",
      "name": "数据库连接#2",
      "intro": "可连接常用数据库，并执行sql",
      "avatar": "core/workflow/template/datasource",
      "flowNodeType": "pluginModule",
      "showStatus": true,
      "position": {
        "x": 6587.090452900172,
        "y": -947.9773461563882
      },
      "version": "4811",
      "inputs": [
        {
          "key": "system_forbid_stream",
          "renderTypeList": [
            "switch"
          ],
          "valueType": "boolean",
          "label": "禁用流输出",
          "description": "强制设置嵌套运行的应用，均以非流模式运行",
          "value": false,
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "select",
            "reference"
          ],
          "selectedTypeIndex": 0,
          "valueType": "string",
          "canEdit": false,
          "key": "databaseType",
          "label": "databaseType",
          "description": "数据库的类型",
          "defaultValue": "",
          "list": [
            {
              "label": "MySQL",
              "value": "MySQL"
            },
            {
              "label": "PostgreSQL",
              "value": "PostgreSQL"
            },
            {
              "label": "Microsoft SQL Server",
              "value": "Microsoft SQL Server"
            }
          ],
          "required": true,
          "value": "MySQL",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "input",
            "reference"
          ],
          "selectedTypeIndex": 0,
          "valueType": "string",
          "canEdit": false,
          "key": "host",
          "label": "host",
          "description": "数据库连接host",
          "defaultValue": "",
          "required": true,
          "list": [
            {
              "label": "",
              "value": ""
            }
          ],
          "value": "39.106.50.196",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "selectedTypeIndex": 0,
          "valueType": "number",
          "canEdit": false,
          "key": "port",
          "label": "port",
          "description": "数据库连接端口号",
          "defaultValue": "",
          "required": true,
          "list": [
            {
              "label": "",
              "value": ""
            }
          ],
          "value": 30336,
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "input",
            "reference"
          ],
          "selectedTypeIndex": 0,
          "valueType": "string",
          "canEdit": false,
          "key": "databaseName",
          "label": "databaseName",
          "description": "数据库名称",
          "defaultValue": "",
          "required": true,
          "list": [
            {
              "label": "",
              "value": ""
            }
          ],
          "value": "car",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "input",
            "reference"
          ],
          "selectedTypeIndex": 0,
          "valueType": "string",
          "canEdit": false,
          "key": "password",
          "label": "password",
          "description": "数据库密码",
          "defaultValue": "",
          "list": [
            {
              "label": "",
              "value": ""
            }
          ],
          "required": true,
          "value": "mysql_ShfkEF",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "input",
            "reference"
          ],
          "selectedTypeIndex": 0,
          "valueType": "string",
          "canEdit": false,
          "key": "user",
          "label": "user",
          "description": "数据库账号",
          "defaultValue": "",
          "list": [
            {
              "label": "",
              "value": ""
            }
          ],
          "required": true,
          "value": "root",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "input",
            "reference"
          ],
          "selectedTypeIndex": 1,
          "valueType": "string",
          "canEdit": false,
          "key": "sql",
          "label": "sql",
          "description": "sql语句，可以传入sql语句直接执行",
          "defaultValue": "",
          "list": [
            {
              "label": "",
              "value": ""
            }
          ],
          "required": true,
          "toolDescription": "sql语句，可以传入sql语句直接执行",
          "value": [
            "jB7G9WiseTUd",
            "qLUQfhG0ILRX"
          ],
          "valueDesc": "",
          "debugLabel": ""
        }
      ],
      "outputs": [
        {
          "id": "result",
          "type": "static",
          "key": "result",
          "valueType": "string",
          "label": "result",
          "description": "数据库连接结果",
          "valueDesc": ""
        }
      ],
      "pluginId": "community-databaseConnection"
    },
    {
      "nodeId": "rxeOz9Iwi0gN",
      "name": "代码运行#7",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": 7170.857407614805,
        "y": -853.4773461563882
      },
      "version": "482",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:these_variables_will_be_input_parameters_for_code_execution",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "value": "function main({data1}){\n    \n    return {\n        result: data1+1\n    }\n}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "number",
          "canEdit": true,
          "key": "data1",
          "label": "data1",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "value": [
            "VARIABLE_NODE_ID",
            "search_index"
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "workflow:full_response_data",
          "valueType": "object",
          "type": "static",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "workflow:execution_error",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "result",
          "valueType": "number",
          "label": "result",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "wBo97XeeWDJl",
      "name": "思考反思",
      "intro": "AI 大模型对话",
      "avatar": "core/workflow/template/aiChat",
      "flowNodeType": "chatNode",
      "showStatus": true,
      "position": {
        "x": 9905.269993961727,
        "y": -1406.079418669676
      },
      "version": "4813",
      "inputs": [
        {
          "key": "model",
          "renderTypeList": [
            "settingLLMModel",
            "reference"
          ],
          "label": "AI 模型",
          "valueType": "string",
          "value": "ep-20250726104520-85xss",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "temperature",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "maxToken",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "isResponseAnswerText",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": false,
          "valueType": "boolean",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatQuoteRole",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "system",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteTemplate",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quotePrompt",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatVision",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatReasoning",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "systemPrompt",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "max": 3000,
          "valueType": "string",
          "label": "提示词",
          "description": "core.app.tip.systemPromptTip",
          "placeholder": "core.app.tip.chatNodeSystemPromptTip",
          "value": "针对上一轮的SQL查询，需要你反思并优化，具体信息如下：\n\n1. 上一轮背景：\n   - 原始需求：{{$workflowStartNodeId.userChatInput$}}\n   - 上下文综合意图：{{$zn5Hgml4jILG.answerText$}}\n   - 上一轮你生成的SQL：\n     {{$7BdojPlukIQw.answerText$}}\n   - 执行结果：{{$nDht8bLHEArr.result$}}\n   - 表结构介绍信息<text>{{$aWE2FuOjdzNU.system_text$}}</text>\n\n2. 可能的问题方向（请逐一排查）：\n   - 时间范围是否错误？（如10月有31天，是否漏了10月31日？）；\n   - 表关联是否正确？\n   - 状态值是否理解错？\n   - 条件是否没有遵照用户的意图和数据库的对齐？\n   - 其他实际情况\n\n3. 改进要求：\n   - 先说明你判断的“上一轮错误原因”（选1-2个最可能的）；\n   - 调整SQL逻辑（如修正时间范围、检查关联关系、对齐条件等）；\n   - 新SQL需保留原需求的核心字段；\n   - 补充注释说明“哪里做了修改，为什么修改”。\n\n重点：根据用户的语境输出合理的结果和限制，比如，出现统计类的，除非用户有需求，否则默认Limit 30 等等\n输出SQL格式示例：```sql\nSELECT \n    ​a \nFROM t_b\nWHERE c = 1\nLIMIT 30;\n```\n\n特别注意事项：最多仅支持输出一条SQL，只能对表进行查询，禁止增加、修改、删除任何数据！！",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "history",
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "valueType": "chatHistory",
          "label": "聊天记录",
          "description": "workflow:max_dialog_rounds",
          "required": true,
          "min": 0,
          "max": 50,
          "value": 6,
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteQA",
          "renderTypeList": [
            "settingDatasetQuotePrompt"
          ],
          "label": "",
          "debugLabel": "知识库引用",
          "description": "",
          "valueType": "datasetQuote",
          "valueDesc": "",
          "toolDescription": "",
          "value": [
            "MNMMMIjjWyMU",
            "quoteQA"
          ]
        },
        {
          "key": "fileUrlList",
          "renderTypeList": [
            "reference",
            "input"
          ],
          "label": "文件链接",
          "debugLabel": "文件链接",
          "valueType": "arrayString",
          "value": [
            [
              "workflowStartNodeId",
              "userFiles"
            ]
          ],
          "valueDesc": "",
          "description": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "用户问题",
          "required": true,
          "value": [
            "workflowStartNodeId",
            "userChatInput"
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": ""
        }
      ],
      "outputs": [
        {
          "id": "history",
          "key": "history",
          "required": true,
          "label": "common:core.module.output.label.New context",
          "description": "将本次回复内容拼接上历史记录，作为新的上下文返回",
          "valueType": "chatHistory",
          "valueDesc": "{\n  obj: System | Human | AI;\n  value: string;\n}[]",
          "type": "static"
        },
        {
          "id": "answerText",
          "key": "answerText",
          "required": true,
          "label": "common:core.module.output.label.Ai response content",
          "description": "将在 stream 回复完毕后触发",
          "valueType": "string",
          "type": "static"
        }
      ]
    },
    {
      "nodeId": "dvRg3CClKSnf",
      "name": "变量更新",
      "intro": "可以更新指定节点的输出值或更新全局变量",
      "avatar": "core/workflow/template/variableUpdate",
      "flowNodeType": "variableUpdate",
      "showStatus": false,
      "position": {
        "x": 10685.844639058134,
        "y": -1084.1931852912921
      },
      "version": "481",
      "inputs": [
        {
          "key": "updateList",
          "valueType": "any",
          "label": "",
          "renderTypeList": [
            "hidden"
          ],
          "value": [
            {
              "variable": [
                "7BdojPlukIQw",
                "answerText"
              ],
              "value": [
                "wBo97XeeWDJl",
                "answerText"
              ],
              "valueType": "string",
              "renderType": "reference"
            }
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": []
    },
    {
      "nodeId": "dtT5THEK4wr2",
      "name": "变量更新#3",
      "intro": "可以更新指定节点的输出值或更新全局变量",
      "avatar": "core/workflow/template/variableUpdate",
      "flowNodeType": "variableUpdate",
      "showStatus": false,
      "position": {
        "x": 19859.571149996635,
        "y": -5515.23622326199
      },
      "version": "481",
      "inputs": [
        {
          "key": "updateList",
          "valueType": "any",
          "label": "",
          "renderTypeList": [
            "hidden"
          ],
          "value": [
            {
              "variable": [
                "VARIABLE_NODE_ID",
                "search_index"
              ],
              "value": [
                "",
                ""
              ],
              "valueType": "number",
              "renderType": "input"
            }
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": []
    },
    {
      "nodeId": "jGr8FFYdsswy",
      "name": "变量更新#4",
      "intro": "可以更新指定节点的输出值或更新全局变量",
      "avatar": "core/workflow/template/variableUpdate",
      "flowNodeType": "variableUpdate",
      "showStatus": false,
      "position": {
        "x": 7734.815677430741,
        "y": -974.8929767435266
      },
      "version": "481",
      "inputs": [
        {
          "key": "updateList",
          "valueType": "any",
          "label": "",
          "renderTypeList": [
            "hidden"
          ],
          "value": [
            {
              "variable": [
                "VARIABLE_NODE_ID",
                "search_index"
              ],
              "value": [
                "rxeOz9Iwi0gN",
                "qLUQfhG0ILRX"
              ],
              "valueType": "number",
              "renderType": "reference"
            }
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": []
    }
  ],
  "edges": [
    {
      "source": "rvbo634w3AYj",
      "target": "MNMMMIjjWyMU",
      "sourceHandle": "rvbo634w3AYj-source-wqre",
      "targetHandle": "MNMMMIjjWyMU-target-left"
    },
    {
      "source": "rvbo634w3AYj",
      "target": "fnWxThTvDg5C",
      "sourceHandle": "rvbo634w3AYj-source-sdfa",
      "targetHandle": "fnWxThTvDg5C-target-left"
    },
    {
      "source": "qW4AhitU7X35",
      "target": "7BdojPlukIQw",
      "sourceHandle": "qW4AhitU7X35-source-right",
      "targetHandle": "7BdojPlukIQw-target-left"
    },
    {
      "source": "7BdojPlukIQw",
      "target": "hq35aydKkx8N",
      "sourceHandle": "7BdojPlukIQw-source-right",
      "targetHandle": "hq35aydKkx8N-target-left"
    },
    {
      "source": "hq35aydKkx8N",
      "target": "jB7G9WiseTUd",
      "sourceHandle": "hq35aydKkx8N-source-right",
      "targetHandle": "jB7G9WiseTUd-target-left"
    },
    {
      "source": "y26spo3xJPRj",
      "target": "pc6dd4t83jP5",
      "sourceHandle": "y26spo3xJPRj-source-right",
      "targetHandle": "pc6dd4t83jP5-target-left"
    },
    {
      "source": "rvbo634w3AYj",
      "target": "y26spo3xJPRj",
      "sourceHandle": "rvbo634w3AYj-source-qiicIbEePegH",
      "targetHandle": "y26spo3xJPRj-target-left"
    },
    {
      "source": "tD4hLtYB2ChP",
      "target": "mO4DMBmY31z7",
      "sourceHandle": "tD4hLtYB2ChP-source-right",
      "targetHandle": "mO4DMBmY31z7-target-left"
    },
    {
      "source": "ef52KtwkRPIb",
      "target": "dkFqVn9QkLXa",
      "sourceHandle": "ef52KtwkRPIb-source-right",
      "targetHandle": "dkFqVn9QkLXa-target-left"
    },
    {
      "source": "weJnyI96ucXU",
      "target": "tD4hLtYB2ChP",
      "sourceHandle": "weJnyI96ucXU-source-right",
      "targetHandle": "tD4hLtYB2ChP-target-left"
    },
    {
      "source": "u62cSH05kmnp",
      "target": "alyUXdHqvOXW",
      "sourceHandle": "u62cSH05kmnp-source-agex",
      "targetHandle": "alyUXdHqvOXW-target-left"
    },
    {
      "source": "alyUXdHqvOXW",
      "target": "v35V5voh8Hq8",
      "sourceHandle": "alyUXdHqvOXW-source-right",
      "targetHandle": "v35V5voh8Hq8-target-left"
    },
    {
      "source": "v35V5voh8Hq8",
      "target": "xEAAIKz05Szi",
      "sourceHandle": "v35V5voh8Hq8-source-right",
      "targetHandle": "xEAAIKz05Szi-target-left"
    },
    {
      "source": "xEAAIKz05Szi",
      "target": "weJnyI96ucXU",
      "sourceHandle": "xEAAIKz05Szi-source-right",
      "targetHandle": "weJnyI96ucXU-target-left"
    },
    {
      "source": "qACqEdzHhFlW",
      "target": "cPFGMszCU8fc",
      "sourceHandle": "qACqEdzHhFlW-source-right",
      "targetHandle": "cPFGMszCU8fc-target-left"
    },
    {
      "source": "cPFGMszCU8fc",
      "target": "qKArJ5Dzj8of",
      "sourceHandle": "cPFGMszCU8fc-source-right",
      "targetHandle": "qKArJ5Dzj8of-target-left"
    },
    {
      "source": "qKArJ5Dzj8of",
      "target": "weJnyI96ucXU",
      "sourceHandle": "qKArJ5Dzj8of-source-right",
      "targetHandle": "weJnyI96ucXU-target-left"
    },
    {
      "source": "r7vGatIkVwXd",
      "target": "qxjHkDwIH1aw",
      "sourceHandle": "r7vGatIkVwXd-source-right",
      "targetHandle": "qxjHkDwIH1aw-target-left"
    },
    {
      "source": "qxjHkDwIH1aw",
      "target": "qU3iPCZewCzy",
      "sourceHandle": "qxjHkDwIH1aw-source-right",
      "targetHandle": "qU3iPCZewCzy-target-left"
    },
    {
      "source": "qU3iPCZewCzy",
      "target": "weJnyI96ucXU",
      "sourceHandle": "qU3iPCZewCzy-source-right",
      "targetHandle": "weJnyI96ucXU-target-left"
    },
    {
      "source": "u62cSH05kmnp",
      "target": "r7vGatIkVwXd",
      "sourceHandle": "u62cSH05kmnp-source-wqre",
      "targetHandle": "r7vGatIkVwXd-target-left"
    },
    {
      "source": "u62cSH05kmnp",
      "target": "weJnyI96ucXU",
      "sourceHandle": "u62cSH05kmnp-source-pCNhrB7VUaMx",
      "targetHandle": "weJnyI96ucXU-target-left"
    },
    {
      "source": "t815PGDCQWlq",
      "target": "xdBaTiVtuGMN",
      "sourceHandle": "t815PGDCQWlq-source-right",
      "targetHandle": "xdBaTiVtuGMN-target-left"
    },
    {
      "source": "xdBaTiVtuGMN",
      "target": "x0K4mwLVvqSY",
      "sourceHandle": "xdBaTiVtuGMN-source-right",
      "targetHandle": "x0K4mwLVvqSY-target-left"
    },
    {
      "source": "u62cSH05kmnp",
      "target": "t815PGDCQWlq",
      "sourceHandle": "u62cSH05kmnp-source-y1i41bWVHPpf",
      "targetHandle": "t815PGDCQWlq-target-left"
    },
    {
      "source": "x0K4mwLVvqSY",
      "target": "weJnyI96ucXU",
      "sourceHandle": "x0K4mwLVvqSY-source-right",
      "targetHandle": "weJnyI96ucXU-target-left"
    },
    {
      "source": "aWE2FuOjdzNU",
      "target": "qW4AhitU7X35",
      "sourceHandle": "aWE2FuOjdzNU-source-right",
      "targetHandle": "qW4AhitU7X35-target-left"
    },
    {
      "source": "mCwvz2GbTDqn",
      "target": "glaTug46Ye7U",
      "sourceHandle": "mCwvz2GbTDqn-source-right",
      "targetHandle": "glaTug46Ye7U-target-left"
    },
    {
      "source": "glaTug46Ye7U",
      "target": "dpPmkWrAWSbS",
      "sourceHandle": "glaTug46Ye7U-source-right",
      "targetHandle": "dpPmkWrAWSbS-target-left"
    },
    {
      "source": "dpPmkWrAWSbS",
      "target": "jC1JgLtteUmk",
      "sourceHandle": "dpPmkWrAWSbS-source-right",
      "targetHandle": "jC1JgLtteUmk-target-left"
    },
    {
      "source": "jC1JgLtteUmk",
      "target": "weJnyI96ucXU",
      "sourceHandle": "jC1JgLtteUmk-source-right",
      "targetHandle": "weJnyI96ucXU-target-left"
    },
    {
      "source": "u62cSH05kmnp",
      "target": "mCwvz2GbTDqn",
      "sourceHandle": "u62cSH05kmnp-source-sE1codbiVL3m",
      "targetHandle": "mCwvz2GbTDqn-target-left"
    },
    {
      "source": "u62cSH05kmnp",
      "target": "qACqEdzHhFlW",
      "sourceHandle": "u62cSH05kmnp-source-sdfa",
      "targetHandle": "qACqEdzHhFlW-target-left"
    },
    {
      "source": "rvbo634w3AYj",
      "target": "nAlFgbaJtEY8",
      "sourceHandle": "rvbo634w3AYj-source-cr8fsOMlD9Lo",
      "targetHandle": "nAlFgbaJtEY8-target-left"
    },
    {
      "source": "nHq58FIzY37m",
      "target": "zn5Hgml4jILG",
      "sourceHandle": "nHq58FIzY37m-source-right",
      "targetHandle": "zn5Hgml4jILG-target-left"
    },
    {
      "source": "MNMMMIjjWyMU",
      "target": "aWE2FuOjdzNU",
      "sourceHandle": "MNMMMIjjWyMU-source-right",
      "targetHandle": "aWE2FuOjdzNU-target-left"
    },
    {
      "source": "jB7G9WiseTUd",
      "target": "nDht8bLHEArr",
      "sourceHandle": "jB7G9WiseTUd-source-right",
      "targetHandle": "nDht8bLHEArr-target-left"
    },
    {
      "source": "rvbo634w3AYj",
      "target": "MNMMMIjjWyMU",
      "sourceHandle": "rvbo634w3AYj-source-lieUUnJgtPaS",
      "targetHandle": "MNMMMIjjWyMU-target-left"
    },
    {
      "source": "rvbo634w3AYj",
      "target": "MNMMMIjjWyMU",
      "sourceHandle": "rvbo634w3AYj-source-zI9wAWUpo5lf",
      "targetHandle": "MNMMMIjjWyMU-target-left"
    },
    {
      "source": "zn5Hgml4jILG",
      "target": "rvbo634w3AYj",
      "sourceHandle": "zn5Hgml4jILG-source-right",
      "targetHandle": "rvbo634w3AYj-target-left"
    },
    {
      "source": "nDht8bLHEArr",
      "target": "rxeOz9Iwi0gN",
      "sourceHandle": "nDht8bLHEArr-source-right",
      "targetHandle": "rxeOz9Iwi0gN-target-left"
    },
    {
      "source": "dkFqVn9QkLXa",
      "target": "wBo97XeeWDJl",
      "sourceHandle": "dkFqVn9QkLXa-source-ELSE IF 1",
      "targetHandle": "wBo97XeeWDJl-target-left"
    },
    {
      "source": "wBo97XeeWDJl",
      "target": "dvRg3CClKSnf",
      "sourceHandle": "wBo97XeeWDJl-source-right",
      "targetHandle": "dvRg3CClKSnf-target-left"
    },
    {
      "source": "toxodU5VgmFA",
      "target": "u62cSH05kmnp",
      "sourceHandle": "toxodU5VgmFA-source-right",
      "targetHandle": "u62cSH05kmnp-target-left"
    },
    {
      "source": "dkFqVn9QkLXa",
      "target": "wBo97XeeWDJl",
      "sourceHandle": "dkFqVn9QkLXa-source-ELSE IF 2",
      "targetHandle": "wBo97XeeWDJl-target-left"
    },
    {
      "source": "dkFqVn9QkLXa",
      "target": "toxodU5VgmFA",
      "sourceHandle": "dkFqVn9QkLXa-source-IF",
      "targetHandle": "toxodU5VgmFA-target-left"
    },
    {
      "source": "dvRg3CClKSnf",
      "target": "hq35aydKkx8N",
      "sourceHandle": "dvRg3CClKSnf-source-right",
      "targetHandle": "hq35aydKkx8N-target-left"
    },
    {
      "source": "tD4hLtYB2ChP",
      "target": "dtT5THEK4wr2",
      "sourceHandle": "tD4hLtYB2ChP-source-right",
      "targetHandle": "dtT5THEK4wr2-target-left"
    },
    {
      "source": "dkFqVn9QkLXa",
      "target": "toxodU5VgmFA",
      "sourceHandle": "dkFqVn9QkLXa-source-ELSE",
      "targetHandle": "toxodU5VgmFA-target-left"
    },
    {
      "source": "rxeOz9Iwi0gN",
      "target": "jGr8FFYdsswy",
      "sourceHandle": "rxeOz9Iwi0gN-source-right",
      "targetHandle": "jGr8FFYdsswy-target-left"
    },
    {
      "source": "jGr8FFYdsswy",
      "target": "ef52KtwkRPIb",
      "sourceHandle": "jGr8FFYdsswy-source-right",
      "targetHandle": "ef52KtwkRPIb-target-left"
    },
    {
      "source": "workflowStartNodeId",
      "target": "nHq58FIzY37m",
      "sourceHandle": "workflowStartNodeId-source-right",
      "targetHandle": "nHq58FIzY37m-target-left"
    }
  ],
  "chatConfig": {
    "welcomeText": "你好，我是汽车口碑数据分析助手，请说出你想要探索的问题：\n[查一下保时捷卡宴的口碑怎么样？]",
    "variables": [
      {
        "id": "p1ha04",
        "key": "角色",
        "label": "角色",
        "type": "select",
        "description": "",
        "required": false,
        "valueType": "string",
        "list": [
          {
            "value": "数据分析师",
            "label": "数据分析师"
          },
          {
            "label": "市场",
            "value": "市场"
          },
          {
            "label": "运营",
            "value": "运营"
          },
          {
            "label": "售后",
            "value": "售后"
          },
          {
            "label": "企业管理",
            "value": "企业管理"
          },
          {
            "label": "一线业务",
            "value": "一线业务"
          }
        ],
        "defaultValue": "数据分析师",
        "enums": [
          {
            "value": "数据分析师",
            "label": "数据分析师"
          },
          {
            "label": "市场",
            "value": "市场"
          },
          {
            "label": "运营",
            "value": "运营"
          },
          {
            "label": "售后",
            "value": "售后"
          },
          {
            "label": "企业管理",
            "value": "企业管理"
          },
          {
            "label": "一线业务",
            "value": "一线业务"
          }
        ],
        "icon": "core/workflow/inputType/option"
      },
      {
        "id": "1vtxpd",
        "key": "search_index",
        "label": "search_index",
        "type": "custom",
        "description": "",
        "required": false,
        "valueType": "number",
        "list": [
          {
            "value": "",
            "label": ""
          }
        ],
        "defaultValue": "0",
        "enums": [
          {
            "value": "",
            "label": ""
          }
        ]
      }
    ],
    "scheduledTriggerConfig": {
      "cronString": "",
      "timezone": "Asia/Shanghai",
      "defaultPrompt": ""
    },
    "_id": "67e0f4cf75f5845645676cf1"
  }
}